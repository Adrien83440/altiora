<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ALTEORE ‚Äî Connexion</title>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --blue-dark:  #0f1f5c;
      --blue-main:  #1a3dce;
      --blue-light: #4f7ef8;
      --blue-ghost: #f0f4ff;
      --white:      #ffffff;
      --text:       #1a1f36;
      --muted:      #6b7280;
      --border:     #e2e8f0;
      --error:      #ef4444;
      --success:    #10b981;
      --radius:     12px;
    }
    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
      min-height: 100vh;
      display: flex;
      background: #f0f4ff;
      overflow: hidden;
    }

    /* ‚îÄ‚îÄ LEFT PANEL ‚îÄ‚îÄ */
    .left-panel {
      width: 52%;
      background: linear-gradient(145deg, #0f1f5c 0%, #1a3dce 55%, #4f7ef8 100%);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 44px 48px;
      position: relative;
      overflow: hidden;
    }
    .left-panel::before {
      content:''; position:absolute; top:-80px; right:-80px;
      width:380px; height:380px;
      background:radial-gradient(circle,rgba(99,102,241,.35) 0%,transparent 70%);
      border-radius:50%;
    }
    .left-panel::after {
      content:''; position:absolute; bottom:-100px; left:-60px;
      width:420px; height:420px;
      background:radial-gradient(circle,rgba(59,130,246,.3) 0%,transparent 70%);
      border-radius:50%;
    }
    .blob {
      position:absolute; width:200px; height:200px;
      background:rgba(255,255,255,.04); border-radius:50%;
      top:38%; left:30%; filter:blur(40px);
    }
    .panel-content { position:relative; z-index:1; }

    /* Logo */
    .logo { display:flex; align-items:center; gap:12px; margin-bottom:44px; }
    .logo-icon {
      width:42px; height:42px;
      background:rgba(255,255,255,.15);
      border:1px solid rgba(255,255,255,.25);
      border-radius:10px;
      display:flex; align-items:center; justify-content:center;
      font-size:18px;
    }
    .logo-text { font-size:22px; font-weight:800; color:white; letter-spacing:1px; }

    /* Headline */
    .panel-headline { font-size:34px; font-weight:800; color:white; line-height:1.2; margin-bottom:14px; letter-spacing:-0.5px; }
    .panel-headline span { background:linear-gradient(90deg,#a5b4fc,#7dd3fc); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
    .panel-sub { font-size:14px; color:rgba(255,255,255,.65); line-height:1.7; max-width:400px; margin-bottom:32px; }

    /* Features grid */
    .features { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
    .feature {
      display:flex; align-items:flex-start; gap:11px;
      background:rgba(255,255,255,.07);
      border:1px solid rgba(255,255,255,.12);
      border-radius:12px; padding:13px 15px;
      transition: background .2s;
    }
    .feature:hover { background:rgba(255,255,255,.12); }
    .feature-icon { font-size:18px; flex-shrink:0; margin-top:1px; }
    .feature-body {}
    .feature-title { font-size:12.5px; font-weight:700; color:rgba(255,255,255,.92); line-height:1.3; }
    .feature-desc { font-size:11px; color:rgba(255,255,255,.5); margin-top:2px; line-height:1.4; }

    /* Badges plans */
    .plans-row { display:flex; align-items:center; gap:8px; margin-top:24px; flex-wrap:wrap; }
    .plan-badge {
      font-size:11px; font-weight:700; letter-spacing:.5px;
      padding:4px 10px; border-radius:20px;
      border:1px solid rgba(255,255,255,.2);
      color:rgba(255,255,255,.75);
      background:rgba(255,255,255,.08);
    }
    .plan-badge.highlight {
      background:rgba(255,255,255,.18);
      color:white;
      border-color:rgba(255,255,255,.35);
    }
    .plans-label { font-size:11.5px; color:rgba(255,255,255,.45); margin-right:2px; }

    /* Panel footer */
    .panel-footer { position:relative; z-index:1; display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:8px; }
    .panel-footer-copy { font-size:11.5px; color:rgba(255,255,255,.35); }
    .panel-footer-link { font-size:11.5px; color:rgba(255,255,255,.5); text-decoration:none; font-weight:600; }
    .panel-footer-link:hover { color:rgba(255,255,255,.8); text-decoration:underline; }

    /* ‚îÄ‚îÄ RIGHT PANEL ‚îÄ‚îÄ */
    .right-panel {
      flex:1; display:flex; align-items:center; justify-content:center;
      padding:48px 40px; background:white; overflow-y:auto;
      animation: fadeUp .5s ease both;
    }
    .auth-container { width:100%; max-width:400px; }
    .auth-header { margin-bottom:28px; }
    .auth-title { font-size:26px; font-weight:800; color:var(--text); margin-bottom:6px; letter-spacing:-.3px; }
    .auth-sub { font-size:14px; color:var(--muted); }

    .tabs { display:flex; border-bottom:2px solid var(--border); margin-bottom:24px; }
    .tab { padding:10px 20px; font-family:'Plus Jakarta Sans',sans-serif; font-size:14px; font-weight:600; color:var(--muted); background:none; border:none; border-bottom:2px solid transparent; margin-bottom:-2px; cursor:pointer; transition:all .2s; }
    .tab.active { color:var(--blue-main); border-bottom-color:var(--blue-main); }

    .form { display:none; flex-direction:column; gap:16px; }
    .form.active { display:flex; }
    .field { display:flex; flex-direction:column; gap:7px; }
    label { font-size:13px; font-weight:600; color:var(--text); }
    .field-row { display:flex; justify-content:space-between; align-items:center; }
    .input-wrap { position:relative; }
    .input-icon { position:absolute; left:13px; top:50%; transform:translateY(-50%); color:var(--muted); font-size:15px; pointer-events:none; }
    input {
      width:100%; padding:11px 14px 11px 38px;
      background:var(--blue-ghost); border:1.5px solid var(--border);
      border-radius:var(--radius); color:var(--text);
      font-family:'Plus Jakarta Sans',sans-serif; font-size:14px;
      outline:none; transition:all .2s;
    }
    input:focus { border-color:var(--blue-main); background:white; box-shadow:0 0 0 3px rgba(26,61,206,.08); }
    input::placeholder { color:#b0b8c8; }

    .forgot { font-size:12px; font-weight:600; color:var(--blue-main); background:none; border:none; cursor:pointer; padding:0; }
    .forgot:hover { text-decoration:underline; }

    .btn {
      width:100%; padding:13px;
      background:linear-gradient(135deg, var(--blue-main) 0%, var(--blue-light) 100%);
      color:white; border:none; border-radius:var(--radius);
      font-family:'Plus Jakarta Sans',sans-serif; font-weight:700; font-size:15px;
      cursor:pointer; transition:all .25s;
      box-shadow:0 4px 15px rgba(26,61,206,.35); letter-spacing:.2px;
    }
    .btn:hover { transform:translateY(-1px); box-shadow:0 6px 20px rgba(26,61,206,.45); }
    .btn:active { transform:translateY(0); }
    .btn:disabled { opacity:.5; cursor:not-allowed; transform:none; }
    .btn-outline { background:transparent; color:var(--blue-main); border:1.5px solid var(--border); box-shadow:none; }
    .btn-outline:hover { border-color:var(--blue-main); background:var(--blue-ghost); box-shadow:none; transform:none; }

    .alert { padding:11px 14px; border-radius:10px; font-size:13px; display:none; line-height:1.4; font-weight:500; }
    .alert.error { background:#fef2f2; border:1px solid #fecaca; color:var(--error); display:block; }
    .alert.success { background:#f0fdf4; border:1px solid #bbf7d0; color:var(--success); display:block; }

    .divider { display:flex; align-items:center; gap:12px; color:var(--muted); font-size:12px; font-weight:500; }
    .divider::before, .divider::after { content:''; flex:1; height:1px; background:var(--border); }

    @keyframes spin { to { transform:rotate(360deg); } }
    .spinner { width:15px; height:15px; border:2px solid rgba(255,255,255,.3); border-top-color:white; border-radius:50%; animation:spin .7s linear infinite; display:inline-block; vertical-align:middle; margin-right:6px; }

    /* Dashboard connect√© */
    #dashboard { display:none; }
    .welcome-header { text-align:center; margin-bottom:28px; }
    .success-icon { width:64px; height:64px; background:linear-gradient(135deg,var(--blue-main),var(--blue-light)); border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:28px; margin:0 auto 16px; box-shadow:0 8px 24px rgba(26,61,206,.3); color:white; font-weight:800; }
    .welcome-header h2 { font-size:22px; font-weight:800; color:var(--text); margin-bottom:6px; }
    .welcome-header p { font-size:13.5px; color:var(--muted); line-height:1.6; }

    /* Quick links modules */
    .modules-grid { display:grid; grid-template-columns:1fr 1fr; gap:9px; margin-bottom:16px; }
    .module-btn {
      display:flex; align-items:center; gap:10px;
      padding:12px 14px;
      background:var(--blue-ghost); border:1.5px solid var(--border);
      border-radius:var(--radius); cursor:pointer;
      text-decoration:none; transition:all .2s;
    }
    .module-btn:hover { border-color:var(--blue-main); background:white; box-shadow:0 2px 8px rgba(26,61,206,.1); transform:translateY(-1px); }
    .module-btn-icon { font-size:18px; flex-shrink:0; }
    .module-btn-text {}
    .module-btn-title { font-size:12.5px; font-weight:700; color:var(--text); line-height:1.2; }
    .module-btn-plan { font-size:10.5px; color:var(--muted); }
    .module-btn.locked { opacity:.55; cursor:default; }
    .module-btn.locked:hover { transform:none; box-shadow:none; border-color:var(--border); }

    .dash-actions { display:flex; flex-direction:column; gap:10px; margin-top:4px; }

    @keyframes fadeUp { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }

    /* Mobile */
    @media (max-width:768px) {
      body { flex-direction:column; overflow:auto; }
      .left-panel { width:100%; padding:28px 24px; min-height:auto; }
      .panel-headline { font-size:24px; }
      .features { display:none; }
      .plans-row { display:none; }
      .right-panel { padding:32px 24px; }
    }
  </style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LEFT PANEL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="left-panel">
  <div class="blob"></div>
  <div class="panel-content">

    <div class="logo">
      <div class="logo-icon">üìä</div>
      <div class="logo-text">ALTEORE</div>
    </div>

    <div class="panel-headline">
      G√©rez votre activit√©<br/>
      <span>d'un seul endroit</span>
    </div>
    <p class="panel-sub">
      La plateforme tout-en-un con√ßue pour les commer√ßants : pilotage financier, marges, fid√©lisation, gestion des dettes et analyse IA de vos bilans.
    </p>

    <div class="features">
      <div class="feature">
        <div class="feature-icon">üìà</div>
        <div class="feature-body">
          <div class="feature-title">Pilotage financier</div>
          <div class="feature-desc">CA, charges fixes & variables, suivi mensuel en temps r√©el</div>
        </div>
      </div>
      <div class="feature">
        <div class="feature-icon">üí∞</div>
        <div class="feature-body">
          <div class="feature-title">Marges & produits</div>
          <div class="feature-desc">Calculez vos marges nettes et optimisez vos prix de vente</div>
        </div>
      </div>
      <div class="feature">
        <div class="feature-icon">üéÅ</div>
        <div class="feature-body">
          <div class="feature-title">Fid√©lisation clients</div>
          <div class="feature-desc">Carte de fid√©lit√© digitale avec notifications SMS automatiques</div>
        </div>
      </div>
      <div class="feature">
        <div class="feature-icon">üìã</div>
        <div class="feature-body">
          <div class="feature-title">Gestion des dettes</div>
          <div class="feature-desc">Suivez fournisseurs, cr√©dits et √©ch√©ances en un coup d'≈ìil</div>
        </div>
      </div>
      <div class="feature">
        <div class="feature-icon">üë•</div>
        <div class="feature-body">
          <div class="feature-title">RH & √©quipe</div>
          <div class="feature-desc">Cong√©s, plannings et gestion des collaborateurs simplifi√©s</div>
        </div>
      </div>
      <div class="feature">
        <div class="feature-icon">ü§ñ</div>
        <div class="feature-body">
          <div class="feature-title">Analyse IA</div>
          <div class="feature-desc">Importez vos bilans PDF pour une analyse financi√®re assist√©e par IA</div>
        </div>
      </div>
    </div>

    <div class="plans-row">
      <span class="plans-label">Offres :</span>
      <span class="plan-badge">Free</span>
      <span class="plan-badge">Pro 69‚Ç¨/mois</span>
      <span class="plan-badge">Max 99‚Ç¨/mois</span>
      <span class="plan-badge highlight">Master 169‚Ç¨/mois</span>
    </div>

  </div>

  <div class="panel-footer">
    <span class="panel-footer-copy">¬© 2026 ALTEORE ‚Äî SARL Ambitio Corp</span>
    <div style="display:flex;gap:14px;align-items:center">
      <a href="mentions-legales.html" class="panel-footer-link" style="font-size:10.5px;opacity:.7">Mentions l√©gales</a>
      <a href="cgv.html" class="panel-footer-link" style="font-size:10.5px;opacity:.7">CGV</a>
      <a href="confidentialite.html" class="panel-footer-link" style="font-size:10.5px;opacity:.7">Confidentialit√©</a>
      <a href="pricing.html" class="panel-footer-link">Voir les offres ‚Üí</a>
    </div>
  </div>
</div>


<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê RIGHT PANEL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="right-panel">
  <div class="auth-container">

    <!-- ‚îÄ‚îÄ Formulaires d'authentification ‚îÄ‚îÄ -->
    <div id="authCard">
      <div class="auth-header">
        <div class="auth-title" id="authTitle">Bon retour üëã</div>
        <div class="auth-sub" id="authSub">Connectez-vous √† votre espace ALTEORE</div>
      </div>

      <div class="tabs">
        <button class="tab active" onclick="switchTab('login')">Connexion</button>
        <button class="tab" onclick="switchTab('register')">Cr√©er un compte</button>
      </div>

      <!-- Connexion -->
      <form class="form active" id="loginForm" onsubmit="handleLogin(event)">
        <div id="loginAlert" class="alert"></div>
        <div class="field">
          <label>Adresse email</label>
          <div class="input-wrap">
            <span class="input-icon">‚úâ</span>
            <input type="email" id="loginEmail" placeholder="vous@exemple.com" autocomplete="email" required />
          </div>
        </div>
        <div class="field">
          <div class="field-row">
            <label>Mot de passe</label>
            <button type="button" class="forgot" onclick="switchTab('reset')">Oubli√© ?</button>
          </div>
          <div class="input-wrap">
            <span class="input-icon">üîí</span>
            <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" required />
          </div>
        </div>
        <button class="btn" type="submit" id="loginBtn">Se connecter ‚Üí</button>
        <div class="divider">ou</div>
        <button type="button" class="btn btn-outline" onclick="switchTab('register')">Cr√©er un compte gratuit</button>
      </form>

      <!-- Inscription -->
      <form class="form" id="registerForm" onsubmit="handleRegister(event)">
        <div id="registerAlert" class="alert"></div>
        <div class="field">
          <label>Pr√©nom &amp; Nom</label>
          <div class="input-wrap">
            <span class="input-icon">üë§</span>
            <input type="text" id="registerName" placeholder="Jean Dupont" autocomplete="name" required />
          </div>
        </div>
        <div class="field">
          <label>Adresse email</label>
          <div class="input-wrap">
            <span class="input-icon">‚úâ</span>
            <input type="email" id="registerEmail" placeholder="vous@exemple.com" autocomplete="email" required />
          </div>
        </div>
        <div class="field">
          <label>Mot de passe</label>
          <div class="input-wrap">
            <span class="input-icon">üîí</span>
            <input type="password" id="registerPassword" placeholder="8 caract√®res minimum" autocomplete="new-password" required minlength="8" />
          </div>
        </div>
        <p style="font-size:12px;color:var(--muted);line-height:1.5;">En cr√©ant un compte, vous b√©n√©ficiez d'un <strong>essai gratuit 15 jours</strong> avec toutes les fonctionnalit√©s d√©bloqu√©es.</p>
        <button class="btn" type="submit" id="registerBtn">Cr√©er mon compte gratuitement ‚Üí</button>
        <div class="divider">ou</div>
        <button type="button" class="btn btn-outline" onclick="switchTab('login')">J'ai d√©j√† un compte</button>
      </form>

      <!-- Mot de passe oubli√© -->
      <form class="form" id="resetForm" onsubmit="handleReset(event)">
        <div id="resetAlert" class="alert"></div>
        <p style="font-size:13px;color:var(--muted);line-height:1.6;">Entrez votre email pour recevoir un lien de r√©initialisation.</p>
        <div class="field">
          <label>Adresse email</label>
          <div class="input-wrap">
            <span class="input-icon">‚úâ</span>
            <input type="email" id="resetEmail" placeholder="vous@exemple.com" autocomplete="email" required />
          </div>
        </div>
        <button class="btn" type="submit" id="resetBtn">Envoyer le lien ‚Üí</button>
        <div class="divider">ou</div>
        <button type="button" class="btn btn-outline" onclick="switchTab('login')">‚Üê Retour √† la connexion</button>
      </form>
    </div>

    <!-- ‚îÄ‚îÄ Vue connect√© ‚îÄ‚îÄ -->
    <div id="dashboard">
      <div class="welcome-header">
        <div class="success-icon">‚úì</div>
        <h2>Bienvenue sur ALTEORE !</h2>
        <p id="welcomeMsg">Vous √™tes connect√©.<br/>Choisissez un module pour commencer.</p>
      </div>

      <div class="modules-grid" id="modulesGrid">
        <a class="module-btn" href="dashboard.html">
          <div class="module-btn-icon">üè†</div>
          <div class="module-btn-text">
            <div class="module-btn-title">Tableau de bord</div>
            <div class="module-btn-plan">Vue d'ensemble</div>
          </div>
        </a>
        <a class="module-btn" href="pilotage.html">
          <div class="module-btn-icon">üìà</div>
          <div class="module-btn-text">
            <div class="module-btn-title">Pilotage</div>
            <div class="module-btn-plan">Pro ¬∑ Max ¬∑ Master</div>
          </div>
        </a>
        <a class="module-btn" href="marges.html">
          <div class="module-btn-icon">üí∞</div>
          <div class="module-btn-text">
            <div class="module-btn-title">Marges</div>
            <div class="module-btn-plan">Pro ¬∑ Max ¬∑ Master</div>
          </div>
        </a>
        <a class="module-btn" href="dettes.html">
          <div class="module-btn-icon">üìã</div>
          <div class="module-btn-text">
            <div class="module-btn-title">Dettes</div>
            <div class="module-btn-plan">Pro ¬∑ Max ¬∑ Master</div>
          </div>
        </a>
        <a class="module-btn" href="fidelite.html">
          <div class="module-btn-icon">üéÅ</div>
          <div class="module-btn-text">
            <div class="module-btn-title">Fid√©lisation</div>
            <div class="module-btn-plan">Max ¬∑ Master</div>
          </div>
        </a>
        <a class="module-btn" href="rh.html">
          <div class="module-btn-icon">üë•</div>
          <div class="module-btn-text">
            <div class="module-btn-title">RH &amp; √âquipe</div>
            <div class="module-btn-plan">Pro ¬∑ Max ¬∑ Master</div>
          </div>
        </a>
      </div>

      <div class="dash-actions">
        <button class="btn" onclick="goToDashboard()">Acc√©der au tableau de bord ‚Üí</button>
        <button class="btn btn-outline" onclick="handleLogout()">Se d√©connecter</button>
      </div>
    </div>

  </div>
</div>


<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCRIPTS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, sendPasswordResetEmail, updateProfile, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
  import { getFirestore, doc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  const app = initializeApp({
    apiKey: "AIzaSyB003WqdRKrT0gbv7P4BNIICuXeqbu8dR4",
    authDomain: "altiora-70599.firebaseapp.com",
    projectId: "altiora-70599",
    storageBucket: "altiora-70599.firebasestorage.app",
    messagingSenderId: "120905555746",
    appId: "1:120905555746:web:618460c65cdc9e57cc8f7b"
  });

  const auth = getAuth(app);
  const db   = getFirestore(app);

  window._auth            = auth;
  window._db              = db;
  window._signIn          = signInWithEmailAndPassword;
  window._createUser      = createUserWithEmailAndPassword;
  window._resetPwd        = sendPasswordResetEmail;
  window._updateProfile   = updateProfile;
  window._signOut         = signOut;
  window._setDoc          = setDoc;
  window._doc             = doc;
  window._serverTimestamp = serverTimestamp;

  onAuthStateChanged(auth, user => user ? showDashboard(user) : showAuth());
</script>

<script>
  /* ‚îÄ‚îÄ Textes onglets ‚îÄ‚îÄ */
  const titles = {
    login:    ['Bon retour üëã',         'Connectez-vous √† votre espace ALTEORE'],
    register: ['Cr√©er un compte',        'Commencez gratuitement ‚Äî 15 jours d\'essai complet'],
    reset:    ['Mot de passe oubli√© ?',  'R√©initialisez votre acc√®s en quelques secondes']
  };

  /* ‚îÄ‚îÄ Navigation onglets ‚îÄ‚îÄ */
  function switchTab(tab) {
    document.querySelectorAll('.form').forEach(f => f.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.getElementById(tab + 'Form').classList.add('active');
    if (tab === 'login')    document.querySelectorAll('.tab')[0].classList.add('active');
    if (tab === 'register') document.querySelectorAll('.tab')[1].classList.add('active');
    document.getElementById('authTitle').textContent = titles[tab][0];
    document.getElementById('authSub').textContent   = titles[tab][1];
    document.querySelectorAll('.alert').forEach(a => { a.className = 'alert'; a.textContent = ''; });
  }

  /* ‚îÄ‚îÄ Helpers ‚îÄ‚îÄ */
  function showAlert(id, msg, type = 'error') {
    const el = document.getElementById(id);
    el.className  = 'alert ' + type;
    el.textContent = msg;
  }

  function setLoading(id, loading, label) {
    const btn = document.getElementById(id);
    btn.disabled = loading;
    btn.innerHTML = loading ? '<span class="spinner"></span>Chargement...' : label;
  }

  function firebaseError(code) {
    const map = {
      'auth/user-not-found':       'Aucun compte avec cet email.',
      'auth/wrong-password':       'Mot de passe incorrect.',
      'auth/invalid-credential':   'Email ou mot de passe incorrect.',
      'auth/email-already-in-use': 'Un compte existe d√©j√† avec cet email.',
      'auth/weak-password':        'Mot de passe trop faible (8 caract√®res minimum).',
      'auth/invalid-email':        'Adresse email invalide.',
      'auth/too-many-requests':    'Trop de tentatives. R√©essayez dans quelques minutes.',
    };
    return map[code] || 'Une erreur est survenue. R√©essayez.';
  }

  /* ‚îÄ‚îÄ Connexion ‚îÄ‚îÄ */
  async function handleLogin(e) {
    e.preventDefault();
    setLoading('loginBtn', true, 'Se connecter ‚Üí');
    try {
      await window._signIn(
        window._auth,
        document.getElementById('loginEmail').value.trim(),
        document.getElementById('loginPassword').value
      );
    } catch (err) {
      showAlert('loginAlert', firebaseError(err.code));
      setLoading('loginBtn', false, 'Se connecter ‚Üí');
    }
  }

  /* ‚îÄ‚îÄ Inscription ‚îÄ‚îÄ */
  async function handleRegister(e) {
    e.preventDefault();
    setLoading('registerBtn', true, 'Cr√©er mon compte gratuitement ‚Üí');
    const name     = document.getElementById('registerName').value.trim();
    const email    = document.getElementById('registerEmail').value.trim();
    const password = document.getElementById('registerPassword').value;
    try {
      const cred = await window._createUser(window._auth, email, password);
      await window._updateProfile(cred.user, { displayName: name });
      await window._setDoc(window._doc(window._db, 'users', cred.user.uid), {
        name,
        email,
        createdAt: window._serverTimestamp(),
        plan: 'trial',
        trialEnd: new Date(Date.now() + 15 * 24 * 60 * 60 * 1000).toISOString()
      });
    } catch (err) {
      showAlert('registerAlert', firebaseError(err.code));
      setLoading('registerBtn', false, 'Cr√©er mon compte gratuitement ‚Üí');
    }
  }

  /* ‚îÄ‚îÄ R√©initialisation ‚îÄ‚îÄ */
  async function handleReset(e) {
    e.preventDefault();
    setLoading('resetBtn', true, 'Envoyer le lien ‚Üí');
    try {
      await window._resetPwd(window._auth, document.getElementById('resetEmail').value.trim());
      showAlert('resetAlert', '‚úì Email envoy√© ! V√©rifiez votre bo√Æte mail.', 'success');
    } catch (err) {
      showAlert('resetAlert', firebaseError(err.code));
    }
    setLoading('resetBtn', false, 'Envoyer le lien ‚Üí');
  }

  /* ‚îÄ‚îÄ D√©connexion ‚îÄ‚îÄ */
  async function handleLogout() {
    await window._signOut(window._auth);
  }

  /* ‚îÄ‚îÄ Affichage connect√© ‚îÄ‚îÄ */
  function showDashboard(user) {
    document.getElementById('authCard').style.display   = 'none';
    document.getElementById('dashboard').style.display  = 'block';
    const name = user.displayName ? user.displayName.split(' ')[0] : user.email;
    document.getElementById('welcomeMsg').innerHTML =
      `Connect√© en tant que <strong>${user.email}</strong><br/>Bienvenue ${name}, que souhaitez-vous faire ?`;
  }

  function showAuth() {
    document.getElementById('authCard').style.display  = 'block';
    document.getElementById('dashboard').style.display = 'none';
  }

  function goToDashboard() {
    window.location.href = 'dashboard.html';
  }

  /* ‚îÄ‚îÄ Exposition globale ‚îÄ‚îÄ */
  window.switchTab      = switchTab;
  window.handleLogin    = handleLogin;
  window.handleRegister = handleRegister;
  window.handleReset    = handleReset;
  window.handleLogout   = handleLogout;
  window.goToDashboard  = goToDashboard;
</script>
</body>
</html>
