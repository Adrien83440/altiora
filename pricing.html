<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ALTEORE ‚Äî Choisissez votre plan</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800;900&display=swap" rel="stylesheet"/>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Plus Jakarta Sans',sans-serif;background:#f0f4ff;min-height:100vh;color:#1e293b}

header{background:linear-gradient(135deg,#0f1f5c,#1a3dce);padding:20px 40px;display:flex;align-items:center;gap:14px}
.logo{width:44px;height:44px}
.logo-text{color:#fff;font-size:22px;font-weight:900;letter-spacing:-0.5px}

.hero{text-align:center;padding:60px 20px 40px}
.hero h1{font-size:36px;font-weight:900;color:#0f1f5c;margin-bottom:12px}
.hero p{font-size:16px;color:#64748b;max-width:500px;margin:0 auto}

.trial-badge{display:inline-block;background:linear-gradient(135deg,#10b981,#059669);color:#fff;padding:8px 20px;border-radius:50px;font-size:13px;font-weight:700;margin-top:16px}

/* Toggle mensuel/annuel */
.billing-toggle{display:flex;align-items:center;justify-content:center;gap:14px;margin:32px 0 0}
.toggle-label{font-size:14px;font-weight:600;color:#64748b}
.toggle-label.active{color:#0f1f5c}
.toggle-wrap{position:relative;width:52px;height:28px;cursor:pointer}
.toggle-wrap input{opacity:0;width:0;height:0}
.toggle-slider{position:absolute;inset:0;background:#cbd5e1;border-radius:50px;transition:.3s}
.toggle-slider:before{content:'';position:absolute;width:22px;height:22px;left:3px;top:3px;background:#fff;border-radius:50%;transition:.3s}
input:checked + .toggle-slider{background:linear-gradient(135deg,#1a3dce,#4f7ef8)}
input:checked + .toggle-slider:before{transform:translateX(24px)}
.save-badge{background:#fef3c7;color:#92400e;font-size:11px;font-weight:700;padding:3px 8px;border-radius:50px}

/* Cards */
.plans{display:flex;gap:20px;justify-content:center;flex-wrap:wrap;padding:40px 20px 60px;max-width:1100px;margin:0 auto}

.plan-card{background:#fff;border-radius:20px;padding:32px 28px;width:310px;border:2px solid #e2e8f0;position:relative;transition:transform .2s,box-shadow .2s}
.plan-card:hover{transform:translateY(-4px);box-shadow:0 20px 60px rgba(15,31,92,.12)}
.plan-card.popular{border-color:#1a3dce;box-shadow:0 8px 40px rgba(26,61,206,.15)}

.popular-badge{position:absolute;top:-14px;left:50%;transform:translateX(-50%);background:linear-gradient(135deg,#1a3dce,#4f7ef8);color:#fff;font-size:11px;font-weight:800;padding:5px 16px;border-radius:50px;white-space:nowrap}

.plan-icon{width:48px;height:48px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:24px;margin-bottom:16px}
.plan-name{font-size:20px;font-weight:800;color:#0f1f5c;margin-bottom:6px}
.plan-desc{font-size:13px;color:#64748b;line-height:1.5;margin-bottom:20px;min-height:52px}

.plan-price{margin-bottom:24px}
.price-amount{font-size:40px;font-weight:900;color:#0f1f5c;line-height:1}
.price-period{font-size:13px;color:#94a3b8;margin-top:2px}
.price-annual{font-size:12px;color:#10b981;font-weight:600;margin-top:4px}

.features{list-style:none;display:flex;flex-direction:column;gap:10px;margin-bottom:28px}
.features li{font-size:13px;color:#374151;display:flex;align-items:flex-start;gap:8px}
.features li .icon{flex-shrink:0;margin-top:1px}
.feat-yes{color:#10b981}
.feat-no{color:#ef4444}
.feat-no-text{color:#9ca3af;text-decoration:line-through}

.btn-plan{width:100%;padding:14px;border-radius:12px;font-family:inherit;font-size:14px;font-weight:700;cursor:pointer;border:none;transition:.2s}
.btn-plan-primary{background:linear-gradient(135deg,#1a3dce,#4f7ef8);color:#fff}
.btn-plan-primary:hover{opacity:.9}
.btn-plan-outline{background:#fff;color:#1a3dce;border:2px solid #1a3dce}
.btn-plan-outline:hover{background:#eff6ff}

.footer-note{text-align:center;font-size:12px;color:#94a3b8;padding-bottom:40px}
.footer-note a{color:#1a3dce;text-decoration:none}

/* Toast */
.toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(80px);background:#1e293b;color:#fff;padding:12px 24px;border-radius:12px;font-size:13px;font-weight:600;opacity:0;transition:.3s;z-index:999}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
</style>
</head>
<body>

<header>
  <svg class="logo" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
    <rect width="200" height="200" rx="40" fill="rgba(255,255,255,0.15)"/>
    <polygon points="100,38 155,135 45,135" fill="none" stroke="white" stroke-width="10" stroke-linejoin="round"/>
    <rect x="45" y="135" width="110" height="10" rx="5" fill="white"/>
    <circle cx="100" cy="38" r="8" fill="white"/>
  </svg>
  <div class="logo-text">Alteore</div>
</header>

<div class="hero">
  <h1>Choisissez votre plan</h1>
  <p>Commencez gratuitement pendant 15 jours ‚Äî aucun engagement, annulation √† tout moment.</p>
  <div class="trial-badge">‚ú® 15 jours d'essai gratuit sur tous les plans</div>

  <div class="billing-toggle">
    <span class="toggle-label active" id="label-monthly">Mensuel</span>
    <label class="toggle-wrap">
      <input type="checkbox" id="billing-toggle" onchange="switchBilling()"/>
      <span class="toggle-slider"></span>
    </label>
    <span class="toggle-label" id="label-annual">Annuel <span class="save-badge">‚àí20%</span></span>
  </div>
</div>

<div class="plans">

  <!-- PRO -->
  <div class="plan-card">
    <div class="plan-icon" style="background:#eff6ff">üìä</div>
    <div class="plan-name">Pro</div>
    <div class="plan-desc">Pilotage financier complet pour ma√Ætriser vos chiffres au quotidien.</div>
    <div class="plan-price">
      <div class="price-amount"><span id="price-pro">69</span>‚Ç¨<span style="font-size:18px;font-weight:600;color:#94a3b8">/mois</span></div>
      <div class="price-annual" id="annual-pro" style="display:none">Factur√© 662‚Ç¨/an ‚Äî √©conomisez 166‚Ç¨</div>
    </div>
    <ul class="features">
      <li><span class="icon feat-yes">‚úÖ</span> Dashboard & pilotage mensuel</li>
      <li><span class="icon feat-yes">‚úÖ</span> Marges & co√ªt de revient</li>
      <li><span class="icon feat-yes">‚úÖ</span> Panier moyen & dettes</li>
      <li><span class="icon feat-yes">‚úÖ</span> Import / Export donn√©es</li>
      <li><span class="icon feat-no">‚ùå</span> <span class="feat-no-text">Module fid√©lisation</span></li>
      <li><span class="icon feat-no">‚ùå</span> <span class="feat-no-text">Analyse de bilan IA</span></li>
      <li><span class="icon feat-no">‚ùå</span> <span class="feat-no-text">Campagnes SMS</span></li>
      <li><span class="icon feat-no">‚ùå</span> <span class="feat-no-text">Module RH</span></li>
    </ul>
    <button class="btn-plan btn-plan-outline" onclick="startCheckout('pro')">Commencer l'essai gratuit</button>
  </div>

  <!-- MAX -->
  <div class="plan-card popular">
    <div class="popular-badge">‚≠ê Le plus populaire</div>
    <div class="plan-icon" style="background:#eff6ff">üöÄ</div>
    <div class="plan-name">Max</div>
    <div class="plan-desc">Tout Pro + fid√©lisation client compl√®te et campagnes SMS.</div>
    <div class="plan-price">
      <div class="price-amount"><span id="price-max">99</span>‚Ç¨<span style="font-size:18px;font-weight:600;color:#94a3b8">/mois</span></div>
      <div class="price-annual" id="annual-max" style="display:none">Factur√© 950‚Ç¨/an ‚Äî √©conomisez 238‚Ç¨</div>
    </div>
    <ul class="features">
      <li><span class="icon feat-yes">‚úÖ</span> Tout le plan Pro</li>
      <li><span class="icon feat-yes">‚úÖ</span> Carte fid√©lit√© digitale</li>
      <li><span class="icon feat-yes">‚úÖ</span> Points, r√©compenses & coupons</li>
      <li><span class="icon feat-yes">‚úÖ</span> Campagnes SMS</li>
      <li><span class="icon feat-yes">‚úÖ</span> Gestion clients compl√®te</li>
      <li><span class="icon feat-no">‚ùå</span> <span class="feat-no-text">Analyse de bilan IA</span></li>
      <li><span class="icon feat-no">‚ùå</span> <span class="feat-no-text">Module RH</span></li>
    </ul>
    <button class="btn-plan btn-plan-primary" onclick="startCheckout('max')">Commencer l'essai gratuit</button>
  </div>

  <!-- MASTER -->
  <div class="plan-card">
    <div class="plan-icon" style="background:#fdf4ff">üëë</div>
    <div class="plan-name">Master</div>
    <div class="plan-desc">La solution compl√®te avec le futur module RH pour tout g√©rer depuis une seule plateforme.</div>
    <div class="plan-price">
      <div class="price-amount"><span id="price-master">169</span>‚Ç¨<span style="font-size:18px;font-weight:600;color:#94a3b8">/mois</span></div>
      <div class="price-annual" id="annual-master" style="display:none">Factur√© 1 622‚Ç¨/an ‚Äî √©conomisez 406‚Ç¨</div>
    </div>
    <ul class="features">
      <li><span class="icon feat-yes">‚úÖ</span> Tout le plan Max</li>
      <li><span class="icon feat-yes">‚úÖ</span> ü§ñ Analyse de bilan par IA</li>
      <li><span class="icon feat-yes">‚úÖ</span> Module RH complet (√† venir)</li>
      <li><span class="icon feat-yes">‚úÖ</span> Support prioritaire</li>
      <li><span class="icon feat-yes">‚úÖ</span> Acc√®s anticip√© nouvelles features</li>
    </ul>
    <button class="btn-plan btn-plan-outline" onclick="startCheckout('master')">Commencer l'essai gratuit</button>
  </div>

</div>

<div class="footer-note">
  üîí Paiement s√©curis√© par Stripe ¬∑ Annulation √† tout moment ¬∑ <a href="#">Conditions g√©n√©rales</a>
</div>

<div class="toast" id="toast"></div>

<script>
const PRICES = {
  pro:     { monthly: 'price_1T3gqlGSYbSgNdWwlr6RX92r', annual: 'price_1T3gveGSYbSgNdWwot2e5YpG' },
  max:     { monthly: 'price_1T3gtkGSYbSgNdWw81ff10tt', annual: 'price_1T3gwGGSYbSgNdWw1ptpHTDB' },
  master:  { monthly: 'price_1T3guhGSYbSgNdWwtKX6EFuy', annual: 'price_1T3gwsGSYbSgNdWwezlggjJR' },
};

const MONTHLY = { pro: 69, max: 99, master: 169 };
const ANNUAL  = { pro: 55, max: 79, master: 135 };

let isAnnual = false;

function switchBilling() {
  isAnnual = document.getElementById('billing-toggle').checked;
  document.getElementById('label-monthly').classList.toggle('active', !isAnnual);
  document.getElementById('label-annual').classList.toggle('active', isAnnual);

  ['pro','max','master'].forEach(plan => {
    document.getElementById('price-' + plan).textContent = isAnnual ? ANNUAL[plan] : MONTHLY[plan];
    document.getElementById('annual-' + plan).style.display = isAnnual ? 'block' : 'none';
  });
}

async function startCheckout(plan) {
  const priceId = PRICES[plan][isAnnual ? 'annual' : 'monthly'];
  const btn = event.target;
  btn.disabled = true;
  btn.textContent = '‚è≥ Chargement...';

  try {
    const res = await fetch('/api/create-subscription-checkout', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ priceId, plan, billing: isAnnual ? 'annual' : 'monthly' })
    });
    const data = await res.json();
    if (data.url) {
      window.location.href = data.url;
    } else {
      throw new Error(data.error || 'Erreur inconnue');
    }
  } catch(e) {
    toast('Erreur : ' + e.message, 'err');
    btn.disabled = false;
    btn.textContent = 'Commencer l\'essai gratuit';
  }
}

function toast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 3000);
}
</script>
</body>
</html>
