<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover"/>
  <title>ALTEORE ‚Äî Mod√®les de documents</title>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"/>
  <style>
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    :root{
      --blue-dark:#0f1f5c;--blue-main:#1a3dce;--blue-light:#4f7ef8;--blue-ghost:#f0f4ff;
      --text:#1a1f36;--muted:#6b7280;--border:#e2e8f0;--bg:#f5f7ff;--radius:12px;
      --green:#10b981;--orange:#f59e0b;--red:#ef4444;--purple:#6366f1;
    }
    html,body{overflow-x:hidden;max-width:100vw}
    body{font-family:'Plus Jakarta Sans',sans-serif;background:var(--bg);color:var(--text);display:flex;min-height:100vh;font-size:13px;}

    /* MAIN */
    .main{margin-left:250px;flex:1;display:flex;flex-direction:column;min-width:0}
    .topbar{background:white;border-bottom:1px solid var(--border);padding:14px 28px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:50}
    .topbar-left h1{font-size:17px;font-weight:700}
    .topbar-left p{font-size:12px;color:var(--muted)}
    .topbar-right{display:flex;align-items:center;gap:10px}
    .btn{padding:8px 16px;border:none;border-radius:8px;font-family:'Plus Jakarta Sans',sans-serif;font-size:13px;font-weight:600;cursor:pointer;transition:all .18s}
    .btn-primary{background:linear-gradient(135deg,var(--blue-main),var(--blue-light));color:white;box-shadow:0 3px 10px rgba(26,61,206,.25)}
    .btn-primary:hover{opacity:.9;transform:translateY(-1px)}
    .btn-outline{background:white;color:var(--blue-main);border:1.5px solid var(--border)}
    .btn-outline:hover{border-color:var(--blue-main);background:var(--blue-ghost)}
    .btn-sm{padding:5px 12px;font-size:12px}
    .btn-xs{padding:3px 8px;font-size:11px}

    /* CONTENT */
    .content{padding:24px 28px;flex:1}

    /* HERO STAT */
    .hero-stats{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-bottom:24px}
    .stat-card{background:white;border:1px solid var(--border);border-radius:var(--radius);padding:16px 18px;display:flex;align-items:center;gap:12px}
    .stat-icon{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
    .stat-val{font-size:20px;font-weight:800;color:var(--text)}
    .stat-lbl{font-size:11px;color:var(--muted);font-weight:500}

    /* THEMES GRID */
    .themes-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:28px}
    .theme-card{background:white;border:1.5px solid var(--border);border-radius:14px;padding:20px;cursor:pointer;transition:all .2s;position:relative;overflow:hidden}
    .theme-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;border-radius:14px 14px 0 0;background:var(--theme-color)}
    .theme-card:hover{border-color:var(--theme-color);transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.08)}
    .theme-card.active{border-color:var(--theme-color);background:var(--theme-bg);box-shadow:0 8px 24px rgba(0,0,0,.1)}
    .theme-header{display:flex;align-items:flex-start;gap:12px;margin-bottom:12px}
    .theme-icon{width:44px;height:44px;border-radius:11px;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0;background:var(--theme-bg)}
    .theme-name{font-size:14px;font-weight:700;color:var(--text);margin-bottom:2px}
    .theme-desc{font-size:11px;color:var(--muted);line-height:1.5}
    .theme-count{margin-left:auto;font-size:11px;font-weight:700;padding:3px 8px;border-radius:20px;background:var(--theme-bg);color:var(--theme-color);flex-shrink:0}
    .theme-tags{display:flex;flex-wrap:wrap;gap:5px}
    .theme-tag{font-size:10px;padding:2px 8px;border-radius:20px;background:#f1f5f9;color:var(--muted);font-weight:500}

    /* DOCUMENTS PANEL */
    .docs-panel{background:white;border:1px solid var(--border);border-radius:14px;overflow:hidden;display:none}
    .docs-panel.show{display:block}
    .docs-panel-head{padding:16px 22px;background:var(--panel-color,#f8faff);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
    .docs-panel-title{font-size:15px;font-weight:700;display:flex;align-items:center;gap:8px}
    .docs-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px;padding:18px}
    .doc-card{border:1.5px solid var(--border);border-radius:10px;padding:14px 16px;cursor:pointer;transition:all .18s;background:white;position:relative}
    .doc-card:hover{border-color:var(--blue-light);background:var(--blue-ghost);transform:translateY(-1px)}
    .doc-type-badge{font-size:9px;font-weight:700;padding:2px 7px;border-radius:20px;position:absolute;top:10px;right:10px}
    .badge-doc{background:#dbeafe;color:#1d4ed8}
    .badge-email{background:#d1fae5;color:#065f46}
    .badge-sms{background:#fef3c7;color:#92400e}
    .doc-icon{font-size:22px;margin-bottom:8px}
    .doc-name{font-size:12px;font-weight:700;margin-bottom:4px}
    .doc-desc{font-size:11px;color:var(--muted);line-height:1.5}

    /* MODAL G√âN√âRATEUR */
    .modal-overlay{position:fixed;inset:0;background:rgba(15,31,92,.45);backdrop-filter:blur(4px);z-index:200;display:none;align-items:center;justify-content:center}
    .modal-overlay.show{display:flex}
    .modal{background:white;border-radius:16px;width:100%;max-width:760px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 24px 60px rgba(15,31,92,.2);overflow:hidden}
    .modal-head{padding:18px 24px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:12px;flex-shrink:0}
    .modal-head-icon{width:38px;height:38px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:18px;background:var(--blue-ghost);flex-shrink:0}
    .modal-head h3{font-size:15px;font-weight:700;flex:1}
    .modal-close{background:none;border:none;font-size:18px;cursor:pointer;color:var(--muted)}
    .modal-tabs{display:flex;border-bottom:1px solid var(--border);flex-shrink:0;padding:0 24px}
    .modal-tab{padding:10px 16px;font-size:12px;font-weight:600;color:var(--muted);cursor:pointer;border-bottom:2.5px solid transparent;transition:all .18s;white-space:nowrap}
    .modal-tab.active{color:var(--blue-main);border-bottom-color:var(--blue-main)}
    .modal-body{display:flex;flex:1;overflow:hidden}
    .modal-left{width:300px;flex-shrink:0;border-right:1px solid var(--border);overflow-y:auto;padding:20px}
    .modal-right{flex:1;display:flex;flex-direction:column;overflow:hidden}
    .modal-preview{flex:1;overflow-y:auto;padding:20px;background:#f8faff}
    .modal-foot{padding:14px 20px;border-top:1px solid var(--border);display:flex;gap:8px;justify-content:flex-end;flex-shrink:0}

    /* FORM FIELDS */
    .field-group{margin-bottom:14px}
    .field-label{font-size:11px;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:.4px;margin-bottom:5px;display:block}
    .field-input{width:100%;padding:8px 11px;border:1.5px solid var(--border);border-radius:8px;font-family:'Plus Jakarta Sans',sans-serif;font-size:13px;color:var(--text);outline:none;transition:border-color .15s}
    .field-input:focus{border-color:var(--blue-main);box-shadow:0 0 0 3px rgba(79,126,248,.1)}
    .field-select{width:100%;padding:8px 11px;border:1.5px solid var(--border);border-radius:8px;font-family:'Plus Jakarta Sans',sans-serif;font-size:13px;color:var(--text);outline:none;background:white;cursor:pointer}
    .field-select:focus{border-color:var(--blue-main)}
    textarea.field-input{resize:vertical;min-height:80px;line-height:1.5}
    .field-row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .field-section{font-size:11px;font-weight:700;color:var(--text);text-transform:uppercase;letter-spacing:.5px;padding:8px 0 6px;border-top:1px solid var(--border);margin-top:4px}
    .field-section:first-child{border-top:none;margin-top:0;padding-top:0}

    /* PREVIEW DOC */
    .preview-doc{background:white;border:1px solid var(--border);border-radius:10px;padding:28px 32px;font-size:13px;line-height:1.8;min-height:300px;white-space:pre-wrap;font-family:'Plus Jakarta Sans',sans-serif;color:var(--text)}
    .preview-doc .preview-header{text-align:right;font-size:12px;color:var(--muted);margin-bottom:20px}
    .preview-doc .preview-subject{font-weight:700;font-size:15px;margin:16px 0 12px;color:var(--text)}
    .preview-sms{background:#1a1f36;border-radius:16px;padding:20px 24px;color:#f1f5f9;font-size:13.5px;line-height:1.7;max-width:360px;margin:0 auto;position:relative}
    .preview-sms::before{content:'SMS';position:absolute;top:10px;right:16px;font-size:9px;font-weight:700;color:rgba(255,255,255,.3);letter-spacing:1px}
    .sms-char-count{text-align:right;font-size:10px;color:var(--muted);margin-top:6px}
    .preview-email{background:white;border:1px solid var(--border);border-radius:10px;overflow:hidden}
    .email-meta{padding:12px 16px;background:#f8faff;border-bottom:1px solid var(--border);font-size:12px}
    .email-meta-row{display:flex;gap:8px;margin-bottom:4px}
    .email-meta-row:last-child{margin-bottom:0}
    .email-meta-lbl{color:var(--muted);font-weight:600;width:50px;flex-shrink:0}
    .email-meta-val{color:var(--text);font-weight:500}
    .email-body{padding:20px;font-size:13px;line-height:1.7;white-space:pre-wrap}

    /* TOAST */
    .toast{position:fixed;bottom:24px;right:24px;background:#1a1f36;color:white;padding:12px 20px;border-radius:10px;font-size:13px;font-weight:600;z-index:9999;transform:translateY(80px);opacity:0;transition:all .3s}
    .toast.show{transform:translateY(0);opacity:1}
    .toast.success{background:#10b981}
    .toast.warn{background:#f59e0b}

    /* SEARCH */
    .search-bar{background:white;border:1.5px solid var(--border);border-radius:10px;padding:10px 14px;display:flex;align-items:center;gap:8px;margin-bottom:20px;transition:border-color .15s}
    .search-bar:focus-within{border-color:var(--blue-main)}
    .search-bar input{flex:1;border:none;outline:none;font-family:'Plus Jakarta Sans',sans-serif;font-size:13px;color:var(--text)}

    /* RESPONSIVE */
    @media(max-width:768px){
      .main{margin-left:0!important}
      .topbar{padding:10px 10px 10px 62px!important}
      .content{padding:12px 10px!important}
      .hero-stats{grid-template-columns:1fr 1fr!important;gap:8px!important}
      .themes-grid{grid-template-columns:1fr!important;gap:10px!important}
      .docs-grid{grid-template-columns:1fr!important}
      .modal{max-width:100%!important;margin:0!important;border-radius:16px 16px 0 0!important;max-height:92vh!important}
      .modal-overlay{align-items:flex-end!important}
      .modal-body{flex-direction:column!important}
      .modal-left{width:100%!important;border-right:none!important;border-bottom:1px solid var(--border)!important;max-height:260px}
    }

    /* EMPTY */
    .empty-docs{text-align:center;padding:40px 20px;color:var(--muted)}
    .empty-docs .icon{font-size:40px;margin-bottom:10px}
  </style>
</head>
<body>

<div class="main">
  <div class="topbar">
    <div class="topbar-left">
      <h1>üìÑ Mod√®les de documents</h1>
      <p>G√©n√©rez lettres, emails et SMS professionnels en quelques secondes ¬∑ Pr√©remplis avec vos infos</p>
    </div>
    <div class="topbar-right">
      <button class="btn btn-outline btn-sm" onclick="openFavorites()">‚≠ê Mes favoris <span id="fav-count" style="background:var(--blue-ghost);color:var(--blue-main);padding:1px 6px;border-radius:10px;font-size:10px;margin-left:4px">0</span></button>
      <button class="btn btn-primary btn-sm" id="btn-recent" onclick="openRecents()">üïê R√©cents</button>
    </div>
  </div>

  <div class="content">
    <!-- STATS -->
    <div class="hero-stats">
      <div class="stat-card"><div class="stat-icon" style="background:#dbeafe">üìÑ</div><div><div class="stat-val">43</div><div class="stat-lbl">Mod√®les disponibles</div></div></div>
      <div class="stat-card"><div class="stat-icon" style="background:#d1fae5">‚úâÔ∏è</div><div><div class="stat-val" id="stat-gen">0</div><div class="stat-lbl">Documents g√©n√©r√©s</div></div></div>
      <div class="stat-card"><div class="stat-icon" style="background:#fef3c7">‚≠ê</div><div><div class="stat-val" id="stat-fav">0</div><div class="stat-lbl">En favoris</div></div></div>
      <div class="stat-card"><div class="stat-icon" style="background:#f3e8ff">ü§ñ</div><div><div class="stat-val">IA</div><div class="stat-lbl">G√©n√©ration intelligente</div></div></div>
    </div>

    <!-- SEARCH -->
    <div class="search-bar">
      <span style="color:var(--muted)">üîç</span>
      <input type="text" placeholder="Rechercher un mod√®le..." id="searchInput" oninput="searchModels(this.value)"/>
      <span id="search-clear" style="cursor:pointer;color:var(--muted);display:none" onclick="clearSearch()">‚úï</span>
    </div>

    <!-- THEMES -->
    <div style="font-size:11px;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:.8px;margin-bottom:12px">Choisissez un th√®me</div>
    <div class="themes-grid" id="themesGrid"></div>

    <!-- DOCUMENTS PANEL -->
    <div class="docs-panel" id="docsPanel">
      <div class="docs-panel-head" id="docsPanelHead">
        <div class="docs-panel-title" id="docsPanelTitle">üìÑ Documents</div>
        <button class="btn btn-outline btn-sm" onclick="closePanel()">‚úï Fermer</button>
      </div>
      <div class="docs-grid" id="docsGrid"></div>
    </div>
  </div>
</div>

<!-- MODAL G√âN√âRATEUR -->
<div class="modal-overlay" id="genModal">
  <div class="modal">
    <div class="modal-head">
      <div class="modal-head-icon" id="modal-icon">üìÑ</div>
      <h3 id="modal-title">G√©n√©rer le document</h3>
      <div style="display:flex;gap:8px;align-items:center;margin-left:auto">
        <button class="btn btn-xs" id="fav-btn" onclick="toggleFav()" style="background:#fef3c7;color:#92400e;border:1px solid #fcd34d">‚≠ê</button>
        <button class="modal-close" onclick="closeModal()">‚úï</button>
      </div>
    </div>
    <div class="modal-tabs">
      <div class="modal-tab active" onclick="switchTab('form',this)">‚úèÔ∏è Param√®tres</div>
      <div class="modal-tab" onclick="switchTab('preview',this)">üëÅ Aper√ßu</div>
      <div class="modal-tab" onclick="switchTab('tips',this)">üí° Conseils</div>
    </div>
    <div class="modal-body">
      <div class="modal-left" id="modalForm"></div>
      <div class="modal-right">
        <div class="modal-preview" id="modalPreview">
          <div style="text-align:center;color:var(--muted);padding:40px 20px">
            <div style="font-size:32px;margin-bottom:10px">‚úèÔ∏è</div>
            <div>Remplissez les champs pour voir l'aper√ßu</div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-foot">
      <button class="btn btn-outline btn-sm" onclick="closeModal()">Annuler</button>
      <button class="btn btn-outline btn-sm" onclick="copyDoc()" id="btn-copy">üìã Copier</button>
      <button class="btn btn-primary btn-sm" onclick="printDoc()">üñ®Ô∏è Imprimer / PDF</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
  import { getFirestore, doc, setDoc, getDoc, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
  const app = initializeApp({
    apiKey:"AIzaSyB003WqdRKrT0gbv7P4BNIICuXeqbu8dR4",
    authDomain:"altiora-70599.firebaseapp.com",
    projectId:"altiora-70599",
    storageBucket:"altiora-70599.firebasestorage.app",
    messagingSenderId:"120905555746",
    appId:"1:120905555746:web:618460c65cdc9e57cc8f7b"
  });
  const auth=getAuth(app); const db=getFirestore(app);
  window._auth=auth; window._db=db; window._doc=doc;
  window._setDoc=setDoc; window._getDoc=getDoc;
  window._collection=collection; window._getDocs=getDocs;
  window._signOut=signOut;
  onAuthStateChanged(auth, async user=>{
    if(!user){window.location.href='index.html';return;}
    window._uid=user.uid;
    window._userName=user.displayName||user.email.split('@')[0];
    window._userEmail=user.email||'';
    window._firebaseReady=true;
    document.getElementById('av').textContent=window._userName.charAt(0).toUpperCase();
    document.getElementById('uname').textContent=window._userName;
    await window.loadProfile();
    window.initModeles();
  });
</script>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PROFIL ENTREPRISE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
window._profile = {};
window.loadProfile = async function(){
  if(!window._uid) return;
  try{
    const snap = await window._getDoc(window._doc(window._db,'users',window._uid));
    if(snap.exists()) window._profile = snap.data()||{};
  }catch(e){}
};

function pv(key, fallback=''){
  return window._profile[key]||fallback;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// DONN√âES : TH√àMES + MOD√àLES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const THEMES = [
  {
    id:'comm-interne', name:'Communication interne', icon:'üì¢',
    color:'#3b82f6', bg:'#eff6ff',
    desc:'Notes de service, CR de r√©union, annonces internes',
    tags:['Note de service','CR r√©union','Annonce'],
    docs:[
      {id:'note-service', name:'Note de service', icon:'üìã', type:'doc',
       desc:'Directive ou information officielle aux collaborateurs',
       tips:'Soyez clair et concis. Pr√©cisez l\'objet, les destinataires et l\'action attendue.',
       fields:[
         {id:'entreprise',label:'Entreprise',type:'text',prefill:'nom'},
         {id:'expediteur',label:'De (nom + poste)',type:'text',placeholder:'Ex: Jean Martin, Responsable'},
         {id:'destinataires',label:'√Ä',type:'text',placeholder:'Ex: Tous les collaborateurs'},
         {id:'objet',label:'Objet *',type:'text',placeholder:'Ex: Nouvelles horaires d\'ouverture'},
         {id:'date',label:'Date',type:'date',today:true},
         {id:'contenu',label:'Contenu de la note *',type:'textarea',placeholder:'D√©taillez votre message...'},
         {id:'action',label:'Action requise (optionnel)',type:'text',placeholder:'Ex: Merci de confirmer r√©ception'},
       ],
       generate: f=>`NOTE DE SERVICE
${f.entreprise||'[Entreprise]'}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

DE       : ${f.expediteur||'[Exp√©diteur]'}
√Ä        : ${f.destinataires||'[Destinataires]'}
DATE     : ${f.date||new Date().toLocaleDateString('fr-FR')}
OBJET    : ${f.objet||'[Objet]'}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

${f.contenu||'[Contenu de la note]'}

${f.action?`\nAction requise : ${f.action}\n`:''}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${f.expediteur||'[Exp√©diteur]'}
${f.entreprise||'[Entreprise]'}`
      },
      {id:'cr-reunion', name:'Compte-rendu de r√©union', icon:'üìù', type:'doc',
       desc:'Synth√®se officielle d\'une r√©union avec d√©cisions et actions',
       tips:'Notez les d√©cisions prises, les responsables et les d√©lais. Envoyez sous 24h apr√®s la r√©union.',
       fields:[
         {id:'entreprise',label:'Entreprise',type:'text',prefill:'nom'},
         {id:'date_reunion',label:'Date de la r√©union',type:'date',today:true},
         {id:'lieu',label:'Lieu',type:'text',placeholder:'Ex: Salle de r√©union, Visio...'},
         {id:'participants',label:'Participants',type:'textarea',placeholder:'Pr√©nom Nom - Poste (un par ligne)'},
         {id:'ordre_jour',label:'Ordre du jour',type:'textarea',placeholder:'1. Point 1\n2. Point 2'},
         {id:'discussions',label:'Points discut√©s & d√©cisions',type:'textarea',placeholder:'R√©sumez les √©changes et d√©cisions...'},
         {id:'actions',label:'Actions √† mener',type:'textarea',placeholder:'- Action : Responsable - D√©lai'},
         {id:'prochaine',label:'Prochaine r√©union (optionnel)',type:'text',placeholder:'Ex: 15 mars 2025'},
         {id:'redacteur',label:'R√©dacteur',type:'text',placeholder:'Votre nom'},
       ],
       generate: f=>`COMPTE-RENDU DE R√âUNION
${f.entreprise||'[Entreprise]'}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üìÖ Date       : ${f.date_reunion||'[Date]'}
üìç Lieu       : ${f.lieu||'[Lieu]'}
üë• Pr√©sents   : 
${(f.participants||'[Participants]').split('\n').map(p=>'  ‚Ä¢ '+p).join('\n')}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
ORDRE DU JOUR
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${f.ordre_jour||'[Ordre du jour]'}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
DISCUSSIONS & D√âCISIONS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${f.discussions||'[Points discut√©s]'}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
ACTIONS √Ä MENER
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${f.actions||'[Actions]'}

${f.prochaine?`\nüìÖ Prochaine r√©union : ${f.prochaine}\n`:''}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
R√©dig√© par : ${f.redacteur||'[R√©dacteur]'}
Le ${new Date().toLocaleDateString('fr-FR')}`
      },
      {id:'annonce-interne', name:'Annonce interne', icon:'üì£', type:'email',
       desc:'Email d\'annonce (arriv√©e, d√©part, promotion, changement org.)',
       tips:'Personnalisez selon le type d\'√©v√©nement. Soyez chaleureux et positif.',
       fields:[
         {id:'entreprise',label:'Entreprise',type:'text',prefill:'nom'},
         {id:'type_annonce',label:'Type d\'annonce',type:'select',options:['Arriv√©e d\'un nouveau collaborateur','D√©part d\'un collaborateur','Promotion interne','R√©organisation','Autre']},
         {id:'prenom_nom',label:'Pr√©nom & Nom concern√©',type:'text',placeholder:'Ex: Marie Dupont'},
         {id:'poste',label:'Poste / R√¥le',type:'text',placeholder:'Ex: Responsable Marketing'},
         {id:'date_eff',label:'Date d\'effet',type:'date',today:true},
         {id:'message',label:'Message compl√©mentaire',type:'textarea',placeholder:'Ajoutez des d√©tails personnalis√©s...'},
         {id:'expediteur',label:'Signataire',type:'text',placeholder:'Ex: La direction'},
       ],
       objet: f=>`${f.type_annonce||'Annonce'} ‚Äî ${f.prenom_nom||''}`,
       generate: f=>{
         const greet = f.type_annonce==='D√©part d\'un collaborateur'?`Nous vous informons avec √©motion du d√©part de ${f.prenom_nom||'[Nom]'}, qui occupait le poste de ${f.poste||'[Poste]'} depuis plusieurs ann√©es. Nous lui souhaitons le meilleur pour la suite de son parcours.`:
           f.type_annonce==='Promotion interne'?`Nous avons le plaisir de vous annoncer la promotion de ${f.prenom_nom||'[Nom]'} au poste de ${f.poste||'[Poste]'}, √† compter du ${f.date_eff||'[Date]'}.`:
           `Nous avons le plaisir de vous annoncer l'arriv√©e de ${f.prenom_nom||'[Nom]'} en tant que ${f.poste||'[Poste]'}, √† compter du ${f.date_eff||'[Date]'}.`;
         return `Ch√®re √©quipe,\n\n${greet}\n\n${f.message||''}\n\nNous comptons sur votre accueil bienveillant et votre soutien.\n\nCordialement,\n${f.expediteur||f.entreprise||'La Direction'}`;}
      },
      {id:'ordre-du-jour', name:'Ordre du jour', icon:'üìÖ', type:'doc',
       desc:'Planification structur√©e d\'une r√©union √† venir',
       tips:'Envoyez l\'ordre du jour 48h avant. Incluez la dur√©e estim√©e de chaque point.',
       fields:[
         {id:'entreprise',label:'Entreprise',type:'text',prefill:'nom'},
         {id:'objet_reunion',label:'Objet de la r√©union',type:'text',placeholder:'Ex: Bilan mensuel Q3'},
         {id:'date_reunion',label:'Date & heure',type:'text',placeholder:'Ex: Lundi 10 mars √† 14h00'},
         {id:'lieu',label:'Lieu / Lien visio',type:'text',placeholder:'Ex: Salle A ou Teams'},
         {id:'participants',label:'Participants',type:'textarea',placeholder:'Noms des invit√©s'},
         {id:'points',label:'Points √† l\'ordre du jour',type:'textarea',placeholder:'1. [Dur√©e] Point 1\n2. [Dur√©e] Point 2\n3. [Dur√©e] Questions diverses'},
         {id:'prep',label:'Documents √† pr√©parer (optionnel)',type:'text',placeholder:'Ex: Bilan CA, Tableaux de bord'},
       ],
       generate: f=>`ORDRE DU JOUR
${f.entreprise||'[Entreprise]'}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

üìÖ Date       : ${f.date_reunion||'[Date]'}
üìç Lieu       : ${f.lieu||'[Lieu]'}
üë• Participants :
${(f.participants||'[Participants]').split('\n').map(p=>'  ‚Ä¢ '+p).join('\n')}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
OBJET : ${f.objet_reunion||'[Objet]'}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

POINTS √Ä TRAITER :

${f.points||'[Points √† d√©finir]'}

${f.prep?`\nüìé Documents √† pr√©parer : ${f.prep}\n`:''}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Merci de confirmer votre pr√©sence.`
      },
    ]
  },
  {
    id:'comm-commerciale', name:'Commercial & Clients', icon:'ü§ù',
    color:'#10b981', bg:'#f0fdf4',
    desc:'Propositions, relances clients, emails de prospection',
    tags:['Devis','Relance','Prospection','Remerciement'],
    docs:[
      {id:'email-bienvenue', name:'Email de bienvenue client', icon:'üëã', type:'email',
       desc:'Accueillez chaleureusement un nouveau client',
       tips:'Envoyez sous 24h apr√®s la signature. Mentionnez les prochaines √©tapes concr√®tes.',
       fields:[
         {id:'entreprise',label:'Votre entreprise',type:'text',prefill:'nom'},
         {id:'client_nom',label:'Nom du client',type:'text',placeholder:'Ex: Jean Dupont'},
         {id:'client_societe',label:'Soci√©t√© du client (optionnel)',type:'text',placeholder:'Ex: ABC Corp'},
         {id:'produit',label:'Produit / Service souscrit',type:'text',placeholder:'Ex: Abonnement Pro'},
         {id:'contact',label:'Votre contact d√©di√©',type:'text',placeholder:'Ex: Sophie Martin'},
         {id:'email_contact',label:'Email de contact',type:'text',prefill:'email'},
         {id:'tel_contact',label:'T√©l√©phone (optionnel)',type:'text',placeholder:'Ex: 06 00 00 00 00'},
         {id:'prochaines_etapes',label:'Prochaines √©tapes',type:'textarea',placeholder:'1. Onboarding le...\n2. Formation le...'},
       ],
       objet: f=>`Bienvenue chez ${f.entreprise||'[Entreprise]'} ! üéâ`,
       generate: f=>`Cher(e) ${f.client_nom||'[Client]'},\n\nNous sommes ravis de vous accueillir parmi nos clients${f.client_societe?' en tant que repr√©sentant de '+f.client_societe:''} !\n\nVotre ${f.produit||'abonnement'} est d√©sormais actif. Pour vous accompagner dans les meilleures conditions, voici les prochaines √©tapes :\n\n${f.prochaines_etapes||'‚Ä¢ Nous prendrons contact avec vous sous 24h pour organiser votre prise en main.'}\n\nVotre contact d√©di√© est ${f.contact||'notre √©quipe'} ‚Äî disponible √† ${f.email_contact||'[email]'}${f.tel_contact?' ou au '+f.tel_contact:''}.\n\nN'h√©sitez pas √† nous solliciter pour toute question.\n\nChaleureusement,\n${f.contact||f.entreprise||'[Entreprise]'}\n${f.entreprise||''}`
      },
      {id:'relance-client', name:'Relance client (inactif)', icon:'üîÑ', type:'email',
       desc:'R√©activez un client qui ne vous a plus donn√© signe de vie',
       tips:'Attendez 3 mois minimum avant d\'envoyer. Proposez toujours quelque chose de concret.',
       fields:[
         {id:'entreprise',label:'Votre entreprise',type:'text',prefill:'nom'},
         {id:'client_nom',label:'Pr√©nom du client',type:'text',placeholder:'Ex: Sophie'},
         {id:'derniere_cmd',label:'Derni√®re interaction',type:'text',placeholder:'Ex: il y a 3 mois'},
         {id:'offre',label:'Offre ou actualit√© √† mentionner',type:'text',placeholder:'Ex: Nouvelle gamme printemps, -10% fid√©lit√©'},
         {id:'expediteur',label:'Signataire',type:'text',placeholder:'Votre nom'},
       ],
       objet: f=>`On pensait √† vous, ${f.client_nom||'[Pr√©nom]'} üòä`,
       generate: f=>`Bonjour ${f.client_nom||'[Pr√©nom]'},\n\nCela fait ${f.derniere_cmd||'quelque temps'} que nous n'avons pas eu le plaisir de vous retrouver chez ${f.entreprise||'[Entreprise]'}, et vous nous manquez !\n\n${f.offre?`Nous avons une bonne nouvelle pour vous : ${f.offre}.\n\n`:''}Nous serions ravis de vous revoir et de vous proposer nos nouveaut√©s.\n\nN'h√©sitez pas √† nous contacter ‚Äî nous restons √† votre √©coute.\n\n√Ä tr√®s bient√¥t,\n${f.expediteur||f.entreprise||'[Entreprise]'}`
      },
      {id:'remerciement-client', name:'Lettre de remerciement client', icon:'üôè', type:'email',
       desc:'Remerciez un client fid√®le ou apr√®s une commande importante',
       tips:'La personnalisation est cl√©. Mentionnez quelque chose de sp√©cifique √† ce client.',
       fields:[
         {id:'entreprise',label:'Votre entreprise',type:'text',prefill:'nom'},
         {id:'client_nom',label:'Nom du client',type:'text',placeholder:'Ex: Mme Dubois'},
         {id:'motif',label:'Motif du remerciement',type:'text',placeholder:'Ex: votre fid√©lit√©, votre commande du 15/03'},
         {id:'message_perso',label:'Message personnalis√© (optionnel)',type:'textarea',placeholder:'Ajoutez une note personnelle...'},
         {id:'geste',label:'Geste commercial (optionnel)',type:'text',placeholder:'Ex: code promo MERCI10'},
         {id:'expediteur',label:'Signataire',type:'text',placeholder:'Votre nom'},
       ],
       objet: f=>`Merci ${f.client_nom||''}`,
       generate: f=>`${f.client_nom||'Cher(e) client(e)'},\n\nNous tenions √† vous exprimer notre sinc√®re gratitude pour ${f.motif||'votre confiance et votre fid√©lit√©'}.\n\n${f.message_perso||`Votre satisfaction est notre priorit√©, et c'est gr√¢ce √† des clients comme vous que ${f.entreprise||'notre entreprise'} peut grandir et s'am√©liorer chaque jour.`}\n\n${f.geste?`En signe de reconnaissance, nous souhaitons vous offrir : ${f.geste}\n\n`:''}Encore merci, et √† tr√®s bient√¥t.\n\nAvec nos meilleures salutations,\n${f.expediteur||f.entreprise||'[Entreprise]'}`
      },
      {id:'prospection', name:'Email de prospection', icon:'üéØ', type:'email',
       desc:'Approchez de nouveaux prospects de mani√®re professionnelle',
       tips:'Personnalisez TOUJOURS. Mentionnez pourquoi vous contactez cette personne en particulier. Court = efficace.',
       fields:[
         {id:'entreprise',label:'Votre entreprise',type:'text',prefill:'nom'},
         {id:'prospect_nom',label:'Pr√©nom du prospect',type:'text',placeholder:'Ex: Thomas'},
         {id:'prospect_societe',label:'Soci√©t√© du prospect',type:'text',placeholder:'Ex: Startup XYZ'},
         {id:'accroche',label:'Accroche personnalis√©e',type:'text',placeholder:'Ex: J\'ai vu votre ouverture sur LinkedIn'},
         {id:'valeur',label:'Ce que vous apportez',type:'text',placeholder:'Ex: r√©duire vos co√ªts de gestion de 30%'},
         {id:'cta',label:'Appel √† l\'action',type:'text',placeholder:'Ex: un appel de 20 min cette semaine'},
         {id:'expediteur',label:'Votre nom + poste',type:'text',placeholder:'Ex: Marc, Fondateur'},
       ],
       objet: f=>`${f.prospect_societe||'[Soci√©t√©]'} √ó ${f.entreprise||'[Votre soci√©t√©]'}`,
       generate: f=>`Bonjour ${f.prospect_nom||'[Pr√©nom]'},\n\n${f.accroche||`J'ai d√©couvert ${f.prospect_societe||'votre entreprise'} et je souhaitais vous contacter directement.`}\n\nJe dirige ${f.entreprise||'[Entreprise]'} et nous aidons des soci√©t√©s comme ${f.prospect_societe||'la v√¥tre'} √† ${f.valeur||'[votre proposition de valeur]'}.\n\nJe ne veux pas vous prendre trop de temps ‚Äî seriez-vous disponible pour ${f.cta||'un rapide √©change cette semaine'} ?\n\nCordialement,\n${f.expediteur||f.entreprise||'[Exp√©diteur]'}`
      },
      {id:'reclamation-fournisseur', name:'R√©clamation fournisseur', icon:'‚ö†Ô∏è', type:'doc',
       desc:'Signalez un probl√®me de livraison, qualit√© ou facturation',
       tips:'Restez factuel et professionnel. Joignez toujours les pi√®ces justificatives.',
       fields:[
         {id:'entreprise',label:'Votre entreprise',type:'text',prefill:'nom'},
         {id:'fournisseur',label:'Nom du fournisseur',type:'text',placeholder:'Ex: Fournisseur SAS'},
         {id:'ref_commande',label:'R√©f√©rence commande/facture',type:'text',placeholder:'Ex: CMD-2025-0042'},
         {id:'date_cmd',label:'Date de la commande',type:'date'},
         {id:'probleme',label:'Type de probl√®me',type:'select',options:['Retard de livraison','Produit non conforme','Quantit√© incorrecte','Facturation erron√©e','Produit endommag√©','Autre']},
         {id:'description',label:'Description du probl√®me',type:'textarea',placeholder:'D√©crivez pr√©cis√©ment le probl√®me...'},
         {id:'solution',label:'Solution demand√©e',type:'text',placeholder:'Ex: Remplacement, remboursement, avoir...'},
         {id:'delai',label:'D√©lai de r√©ponse souhait√©',type:'text',placeholder:'Ex: 48 heures'},
         {id:'contact',label:'Votre contact',type:'text',placeholder:'Nom + email'},
       ],
       generate: f=>`${f.entreprise||'[Entreprise]'}
Le ${new Date().toLocaleDateString('fr-FR')}

√Ä l'attention de ${f.fournisseur||'[Fournisseur]'}

Objet : R√©clamation ‚Äî Commande r√©f. ${f.ref_commande||'[R√©f√©rence]'} du ${f.date_cmd||'[Date]'}

Madame, Monsieur,

Suite √† la commande r√©f√©renc√©e ci-dessus, nous nous permettons de vous adresser la pr√©sente r√©clamation concernant : ${f.probleme||'un probl√®me constat√©'}.

Description du probl√®me constat√© :
${f.description||'[Description]'}

En cons√©quence, nous vous demandons de bien vouloir proc√©der √† : ${f.solution||'[Solution souhait√©e]'}, dans un d√©lai de ${f.delai||'48 heures'}.

Nous restons disponibles pour tout √©change n√©cessaire au r√®glement rapide de cette situation.

Dans l'attente de votre retour, nous vous prions d'agr√©er, Madame, Monsieur, nos salutations distingu√©es.

${f.contact||f.entreprise||'[Contact]'}`
      },
    ]
  },
  {
    id:'recouvrement', name:'Facturation & Recouvrement', icon:'üí∞',
    color:'#f59e0b', bg:'#fffbeb',
    desc:'Relances impay√©s, mises en demeure, accords de paiement',
    tags:['Relance 1','Relance 2','Mise en demeure','Accord paiement'],
    docs:[
      {id:'relance-1', name:'Relance impay√© ‚Äî Niveau 1 (amiable)', icon:'üì©', type:'email',
       desc:'Premier rappel courtois pour une facture en retard',
       tips:'Ton aimable ‚Äî pensez que c\'est peut-√™tre un oubli. Envoyez √† J+7 apr√®s l\'√©ch√©ance.',
       fields:[
         {id:'entreprise',label:'Votre entreprise',type:'text',prefill:'nom'},
         {id:'client_nom',label:'Nom du client',type:'text',placeholder:'Ex: M. Dupont'},
         {id:'ref_facture',label:'N¬∞ de facture',type:'text',placeholder:'Ex: FA-2025-0089'},
         {id:'montant',label:'Montant TTC (‚Ç¨)',type:'text',placeholder:'Ex: 1 250,00'},
         {id:'date_echeance',label:'Date d\'√©ch√©ance',type:'date'},
         {id:'iban',label:'IBAN / RIB (optionnel)',type:'text',placeholder:'Pour faciliter le r√®glement'},
         {id:'contact',label:'Votre contact',type:'text',placeholder:'Ex: comptabilite@...'},
       ],
       objet: f=>`Rappel ‚Äî Facture ${f.ref_facture||'[N¬∞]'} ‚Äî ${f.montant||''}‚Ç¨`,
       generate: f=>`Bonjour ${f.client_nom||'[Client]'},\n\nNous esp√©rons que vous allez bien.\n\nSauf erreur de notre part, nous constatons que la facture n¬∞${f.ref_facture||'[N¬∞]'} d'un montant de ${f.montant||'[Montant]'} ‚Ç¨ (√©ch√©ance du ${f.date_echeance||'[Date]'}) est toujours en attente de r√®glement.\n\nIl s'agit peut-√™tre d'un simple oubli ‚Äî dans ce cas, merci de r√©gulariser d√®s que possible${f.iban?' par virement sur notre IBAN : '+f.iban:''}.\n\nN'h√©sitez pas √† nous contacter si vous avez la moindre question concernant cette facture.\n\nCordialement,\n${f.contact||f.entreprise||'[Entreprise]'}`
      },
      {id:'relance-2', name:'Relance impay√© ‚Äî Niveau 2 (ferme)', icon:'‚ö†Ô∏è', type:'email',
       desc:'Deuxi√®me relance avec ton plus ferme',
       tips:'Envoyez √† J+21. Mentionnez la premi√®re relance. Posez une date limite claire.',
       fields:[
         {id:'entreprise',label:'Votre entreprise',type:'text',prefill:'nom'},
         {id:'client_nom',label:'Nom du client',type:'text',placeholder:'Ex: M. Dupont'},
         {id:'ref_facture',label:'N¬∞ de facture',type:'text',placeholder:'Ex: FA-2025-0089'},
         {id:'montant',label:'Montant TTC (‚Ç¨)',type:'text',placeholder:'Ex: 1 250,00'},
         {id:'date_limite',label:'Date limite de paiement',type:'date'},
         {id:'contact',label:'Votre contact',type:'text',placeholder:'Ex: comptabilite@...'},
       ],
       objet: f=>`URGENT ‚Äî 2√®me relance ‚Äî Facture ${f.ref_facture||'[N¬∞]'}`,
       generate: f=>`${f.client_nom||'[Client]'},\n\nMalgr√© notre pr√©c√©dent rappel, nous constatons que la facture n¬∞${f.ref_facture||'[N¬∞]'} d'un montant de ${f.montant||'[Montant]'} ‚Ç¨ reste impay√©e √† ce jour.\n\nNous vous demandons de bien vouloir r√©gulariser cette situation dans les plus brefs d√©lais, et au plus tard le ${f.date_limite||'[Date limite]'}.\n\nPass√© ce d√©lai, nous nous verrons dans l'obligation d'engager une proc√©dure de recouvrement, ce que nous souhaitons √©viter.\n\nNous restons disponibles pour trouver une solution amiable. Contactez-nous √† ${f.contact||'[contact]'}.\n\nCordialement,\n${f.entreprise||'[Entreprise]'}`
      },
      {id:'mise-en-demeure', name:'Mise en demeure de payer', icon:'‚öñÔ∏è', type:'doc',
       desc:'Courrier officiel avant proc√©dure judiciaire',
       tips:'√Ä envoyer en recommand√© avec AR. Mentionnez les int√©r√™ts de retard si applicables.',
       fields:[
         {id:'entreprise',label:'Votre entreprise',type:'text',prefill:'nom'},
         {id:'adresse_exp',label:'Votre adresse',type:'text',prefill:'adresse'},
         {id:'client_nom',label:'D√©biteur (nom/soci√©t√©)',type:'text',placeholder:'Ex: Jean Dupont ou SARL XYZ'},
         {id:'adresse_dest',label:'Adresse du d√©biteur',type:'text',placeholder:'Ex: 12 rue des Lilas, 75001 Paris'},
         {id:'montant',label:'Montant total d√ª (‚Ç¨)',type:'text',placeholder:'Ex: 2 450,00'},
         {id:'details',label:'D√©tail des cr√©ances',type:'textarea',placeholder:'Facture FA-001 du ... : 1200‚Ç¨\nFacture FA-002 du ... : 1250‚Ç¨'},
         {id:'delai',label:'D√©lai accord√©',type:'text',placeholder:'Ex: 8 jours'},
         {id:'moyen_paiement',label:'Moyen de paiement',type:'text',placeholder:'Ex: Virement IBAN FR76...'},
       ],
       generate: f=>`${f.entreprise||'[Entreprise]'}
${f.adresse_exp||'[Adresse]'}

                                    ${new Date().toLocaleDateString('fr-FR',{day:'numeric',month:'long',year:'numeric'})}

LETTRE RECOMMAND√âE AVEC ACCUS√â DE R√âCEPTION

√Ä l'attention de : ${f.client_nom||'[D√©biteur]'}
${f.adresse_dest||'[Adresse]'}

Objet : MISE EN DEMEURE DE PAYER

Madame, Monsieur,

En d√©pit de nos relances rest√©es sans suite, nous nous voyons contraints de vous adresser la pr√©sente mise en demeure pour obtenir le r√®glement de la somme de ${f.montant||'[Montant]'} ‚Ç¨ correspondant √† :

${f.details||'[D√©tail des cr√©ances]'}

En cons√©quence, nous vous mettons en demeure de nous r√©gler ladite somme par ${f.moyen_paiement||'[moyen de paiement]'} dans un d√©lai de ${f.delai||'8 jours'} √† compter de la r√©ception de ce courrier.

√Ä d√©faut de r√®glement dans ce d√©lai, nous nous r√©servons le droit d'engager toute proc√©dure judiciaire utile au recouvrement de notre cr√©ance, les frais y aff√©rents √©tant √† votre charge.

Nous esp√©rons que cette d√©marche amiable sera suffisante.

Veuillez agr√©er, Madame, Monsieur, nos salutations distingu√©es.

${f.entreprise||'[Entreprise]'}`
      },
      {id:'accord-paiement', name:'Accord de paiement √©chelonn√©', icon:'ü§ù', type:'doc',
       desc:'Formalisez un √©ch√©ancier de paiement avec un client',
       tips:'Faites signer les deux parties. Gardez un exemplaire de chaque c√¥t√©.',
       fields:[
         {id:'entreprise',label:'Cr√©ancier (votre entreprise)',type:'text',prefill:'nom'},
         {id:'client_nom',label:'D√©biteur',type:'text',placeholder:'Ex: Jean Dupont'},
         {id:'montant_total',label:'Montant total (‚Ç¨)',type:'text',placeholder:'Ex: 3 600,00'},
         {id:'nb_echeances',label:'Nombre d\'√©ch√©ances',type:'text',placeholder:'Ex: 6'},
         {id:'montant_mensuel',label:'Montant par √©ch√©ance (‚Ç¨)',type:'text',placeholder:'Ex: 600,00'},
         {id:'premiere_echeance',label:'1√®re √©ch√©ance le',type:'date'},
         {id:'frequence',label:'Fr√©quence',type:'select',options:['Mensuelle','Bimensuelle','Trimestrielle']},
       ],
       generate: f=>`ACCORD DE PAIEMENT √âCHELONN√â

Entre les soussign√©s :
‚Ä¢ ${f.entreprise||'[Cr√©ancier]'} (Cr√©ancier)
‚Ä¢ ${f.client_nom||'[D√©biteur]'} (D√©biteur)

Il est convenu ce qui suit :

ARTICLE 1 ‚Äî Objet
Le d√©biteur reconna√Æt devoir au cr√©ancier la somme de ${f.montant_total||'[Montant]'} ‚Ç¨.

ARTICLE 2 ‚Äî Modalit√©s de r√®glement
Le d√©biteur s'engage √† r√©gler ladite somme en ${f.nb_echeances||'[N]'} versements de ${f.montant_mensuel||'[Montant/√©ch√©ance]'} ‚Ç¨.
Fr√©quence : ${f.frequence||'Mensuelle'}
1√®re √©ch√©ance : ${f.premiere_echeance||'[Date]'}

ARTICLE 3 ‚Äî Clause r√©solutoire
Tout d√©faut de paiement √† l'√©ch√©ance entra√Æne l'exigibilit√© imm√©diate du solde restant d√ª.

Fait en double exemplaire,
Le ${new Date().toLocaleDateString('fr-FR')}

Signature cr√©ancier :                    Signature d√©biteur :
${f.entreprise||'[Cr√©ancier]'}           ${f.client_nom||'[D√©biteur]'}`
      },
    ]
  },
  {
    id:'juridique', name:'Juridique & Administratif', icon:'‚öñÔ∏è',
    color:'#8b5cf6', bg:'#f5f3ff',
    desc:'NDA, r√©siliations, d√©clarations, mandats',
    tags:['NDA','R√©siliation','D√©claration','Mandat'],
    docs:[
      {id:'nda', name:'Accord de confidentialit√© (NDA)', icon:'üîí', type:'doc',
       desc:'Prot√©gez vos informations confidentielles lors d\'une collaboration',
       tips:'D√©finissez pr√©cis√©ment ce qui est confidentiel. Fixez une dur√©e. Faites relire par un juriste pour les contrats importants.',
       fields:[
         {id:'entreprise',label:'Votre entreprise',type:'text',prefill:'nom'},
         {id:'autre_partie',label:'Autre partie',type:'text',placeholder:'Ex: Jean Dupont ou SAS XYZ'},
         {id:'objet',label:'Objet de l\'accord',type:'text',placeholder:'Ex: projet de partenariat commercial'},
         {id:'duree',label:'Dur√©e de confidentialit√©',type:'text',placeholder:'Ex: 3 ans √† compter de la signature'},
         {id:'date',label:'Date de signature',type:'date',today:true},
       ],
       generate: f=>`ACCORD DE CONFIDENTIALIT√â (NDA)

Entre :
‚Ä¢ ${f.entreprise||'[Partie 1]'} ‚Äî ci-apr√®s ¬´ Partie 1 ¬ª
‚Ä¢ ${f.autre_partie||'[Partie 2]'} ‚Äî ci-apr√®s ¬´ Partie 2 ¬ª

Ci-apr√®s collectivement d√©sign√©es ¬´ les Parties ¬ª

PR√âAMBULE
Les Parties souhaitent s'engager dans des discussions concernant : ${f.objet||'[Objet]'}, au cours desquelles des informations confidentielles pourront √™tre √©chang√©es.

ARTICLE 1 ‚Äî Informations confidentielles
Constituent des informations confidentielles : toutes donn√©es techniques, commerciales, financi√®res, strat√©giques √©chang√©es dans le cadre du pr√©sent accord.

ARTICLE 2 ‚Äî Obligations
Chaque Partie s'engage √† :
‚Ä¢ Ne pas divulguer les informations confidentielles √† des tiers
‚Ä¢ N'utiliser ces informations qu'aux fins du projet mentionn√© ci-dessus
‚Ä¢ Prot√©ger ces informations avec le m√™me soin qu'elle prot√®ge ses propres informations confidentielles

ARTICLE 3 ‚Äî Dur√©e
Le pr√©sent accord prend effet √† la date de signature et demeure en vigueur pendant ${f.duree||'3 ans'}.

Fait √† ________, le ${f.date||new Date().toLocaleDateString('fr-FR')}, en double exemplaire.

${f.entreprise||'[Partie 1]'}           ${f.autre_partie||'[Partie 2]'}
Signature :                              Signature :`
      },
      {id:'resiliation', name:'R√©siliation d\'abonnement / contrat', icon:'üö™', type:'doc',
       desc:'R√©siliez un contrat ou abonnement fournisseur',
       tips:'V√©rifiez le pr√©avis pr√©vu dans votre contrat. Envoyez toujours en recommand√©.',
       fields:[
         {id:'entreprise',label:'Votre entreprise',type:'text',prefill:'nom'},
         {id:'adresse',label:'Votre adresse',type:'text',prefill:'adresse'},
         {id:'fournisseur',label:'Fournisseur / Prestataire',type:'text',placeholder:'Ex: T√©l√©com SAS'},
         {id:'num_contrat',label:'N¬∞ de contrat / r√©f√©rence',type:'text',placeholder:'Ex: CTR-2022-00456'},
         {id:'motif',label:'Motif (optionnel)',type:'select',options:['Non pr√©cis√©','Fin de besoin','Insatisfaction','Tarifs trop √©lev√©s','Changement de prestataire','Cessation d\'activit√©']},
         {id:'date_resil',label:'Date souhait√©e de r√©siliation',type:'date'},
       ],
       generate: f=>`${f.entreprise||'[Entreprise]'}
${f.adresse||'[Adresse]'}

${new Date().toLocaleDateString('fr-FR')}

√Ä l'attention de : ${f.fournisseur||'[Fournisseur]'}

Objet : R√©siliation du contrat r√©f. ${f.num_contrat||'[N¬∞ contrat]'}

Madame, Monsieur,

Par la pr√©sente, nous vous informons de notre d√©cision de r√©silier le contrat n¬∞${f.num_contrat||'[N¬∞]'} nous liant √† votre entreprise${f.motif&&f.motif!=='Non pr√©cis√©'?', pour le motif suivant : '+f.motif:''}.

Nous souhaitons que cette r√©siliation prenne effet le ${f.date_resil||'[Date]'}, conform√©ment aux conditions contractuelles.

Nous vous remercions de bien vouloir nous confirmer la prise en compte de cette r√©siliation par retour de courrier.

Veuillez agr√©er, Madame, Monsieur, nos salutations distingu√©es.

${f.entreprise||'[Entreprise]'}`
      },
      {id:'declaration-honneur', name:'D√©claration sur l\'honneur', icon:'üìú', type:'doc',
       desc:'Attestation personnelle ou professionnelle sur l\'honneur',
       tips:'Ce document peut avoir une valeur l√©gale. Signez-le de fa√ßon manuscrite.',
       fields:[
         {id:'declarant',label:'Nom du d√©clarant',type:'text',placeholder:'Ex: Jean Dupont'},
         {id:'qualite',label:'Qualit√© / Fonction',type:'text',placeholder:'Ex: G√©rant de la soci√©t√© XYZ'},
         {id:'objet_decl',label:'Objet de la d√©claration',type:'textarea',placeholder:'Je soussign√©(e) d√©clare que...'},
         {id:'lieu',label:'Fait √†',type:'text',placeholder:'Ex: Lyon'},
         {id:'date',label:'Date',type:'date',today:true},
       ],
       generate: f=>`D√âCLARATION SUR L'HONNEUR

Je soussign√©(e), ${f.declarant||'[Nom]'},
${f.qualite?'agissant en qualit√© de '+f.qualite+',':''}

d√©clare sur l'honneur que :

${f.objet_decl||'[Objet de la d√©claration]'}

Je certifie l'exactitude des informations ci-dessus et m'expose, en cas de fausse d√©claration, aux sanctions pr√©vues par la loi, notamment aux articles 441-1 et suivants du Code P√©nal.

Fait √† ${f.lieu||'[Ville]'}, le ${f.date||new Date().toLocaleDateString('fr-FR')}

Signature manuscrite :

${f.declarant||'[Nom]'}`
      },
      {id:'mandat-representation', name:'Mandat de repr√©sentation', icon:'üìã', type:'doc',
       desc:'Autorisez quelqu\'un √† vous repr√©senter officiellement',
       tips:'Pr√©cisez clairement l\'√©tendue des pouvoirs conf√©r√©s et la dur√©e du mandat.',
       fields:[
         {id:'mandant',label:'Le mandant (vous)',type:'text',placeholder:'Ex: Jean Dupont, G√©rant de XYZ SAS'},
         {id:'mandataire',label:'Le mandataire (repr√©sentant)',type:'text',placeholder:'Ex: Marie Martin'},
         {id:'objet_mandat',label:'Objet du mandat',type:'text',placeholder:'Ex: me repr√©senter lors de l\'AG du 15 mars'},
         {id:'pouvoirs',label:'Pouvoirs conf√©r√©s',type:'textarea',placeholder:'D√©crivez les actes autoris√©s...'},
         {id:'validite',label:'Validit√© du mandat',type:'text',placeholder:'Ex: du 15/03/2025 au 30/03/2025'},
         {id:'lieu',label:'Fait √†',type:'text',placeholder:'Ex: Paris'},
         {id:'date',label:'Date',type:'date',today:true},
       ],
       generate: f=>`MANDAT DE REPR√âSENTATION

Je soussign√©(e) ${f.mandant||'[Mandant]'},

mandate par la pr√©sente ${f.mandataire||'[Mandataire]'} pour :

${f.objet_mandat||'[Objet du mandat]'}

Pouvoirs conf√©r√©s :
${f.pouvoirs||'[Pouvoirs]'}

Le pr√©sent mandat est valable : ${f.validite||'[Dur√©e]'}.

Fait √† ${f.lieu||'[Ville]'}, le ${f.date||new Date().toLocaleDateString('fr-FR')}

Signature du mandant :              Signature du mandataire :
${f.mandant||'[Mandant]'}           ${f.mandataire||'[Mandataire]'}`
      },
    ]
  },
  {
    id:'sms', name:'SMS Professionnels', icon:'üì±',
    color:'#ec4899', bg:'#fdf2f8',
    desc:'SMS clients : confirmation RDV, promos, infos fermeture',
    tags:['RDV','Promo','Fermeture','Livraison'],
    docs:[
      {id:'sms-rdv-confirm', name:'Confirmation de RDV', icon:'‚úÖ', type:'sms',
       desc:'Confirmez automatiquement un rendez-vous √† votre client',
       tips:'160 caract√®res max pour 1 SMS. Incluez toujours votre nom et un moyen d\'annuler.',
       fields:[
         {id:'entreprise',label:'Nom de l\'√©tablissement',type:'text',prefill:'nom'},
         {id:'client_prenom',label:'Pr√©nom du client',type:'text',placeholder:'Ex: Sophie'},
         {id:'date_rdv',label:'Date du RDV',type:'text',placeholder:'Ex: lundi 10 mars √† 14h30'},
         {id:'adresse',label:'Adresse (optionnel)',type:'text',prefill:'adresse'},
         {id:'tel_annul',label:'T√©l pour annulation',type:'text',prefill:'telephone'},
       ],
       generate: f=>`${f.client_prenom||'Bonjour'}, votre RDV chez ${f.entreprise||'[Entreprise]'} est confirm√© le ${f.date_rdv||'[date]'}${f.adresse?' - '+f.adresse:''}. Pour annuler: ${f.tel_annul||'[T√©l]'}`
      },
      {id:'sms-rdv-rappel', name:'Rappel de RDV (veille)', icon:'üîî', type:'sms',
       desc:'Rappel automatique envoy√© la veille du RDV',
       tips:'Envoyez la veille entre 9h et 18h. Le rappel r√©duit les no-shows de 40%.',
       fields:[
         {id:'entreprise',label:'Nom de l\'√©tablissement',type:'text',prefill:'nom'},
         {id:'client_prenom',label:'Pr√©nom du client',type:'text',placeholder:'Ex: Thomas'},
         {id:'date_rdv',label:'Date & heure du RDV',type:'text',placeholder:'Ex: demain mardi √† 10h00'},
         {id:'tel_annul',label:'T√©l pour annulation',type:'text',prefill:'telephone'},
       ],
       generate: f=>`Rappel: ${f.client_prenom||'Bonjour'}, vous avez RDV chez ${f.entreprise||'[Entreprise]'} ${f.date_rdv||'[date]'}. Pour annuler: ${f.tel_annul||'[T√©l]'}. A demain!`
      },
      {id:'sms-promo', name:'SMS Promotion / Offre', icon:'üéÅ', type:'sms',
       desc:'Informez vos clients d\'une offre ou promotion',
       tips:'Incluez toujours le code promo ou l\'avantage concret. Ajoutez une date de fin pour cr√©er l\'urgence.',
       fields:[
         {id:'entreprise',label:'Entreprise',type:'text',prefill:'nom'},
         {id:'offre',label:'L\'offre en bref',type:'text',placeholder:'Ex: -20% sur tout le magasin'},
         {id:'code',label:'Code promo (optionnel)',type:'text',placeholder:'Ex: PROMO20'},
         {id:'validite',label:'Valable jusqu\'au',type:'text',placeholder:'Ex: dimanche 16 mars'},
         {id:'lien',label:'Lien (optionnel)',type:'text',placeholder:'Ex: votre-site.fr'},
       ],
       generate: f=>`[${f.entreprise||'Entreprise'}] ${f.offre||'Offre sp√©ciale'}${f.code?' - Code: '+f.code:''}${f.validite?' jusqu\'au '+f.validite:''}${f.lien?' > '+f.lien:''} Stop: STOP`
      },
      {id:'sms-fermeture', name:'Info fermeture exceptionnelle', icon:'üö´', type:'sms',
       desc:'Pr√©venez vos clients d\'une fermeture ou modification d\'horaires',
       tips:'Envoyez au moins 48h √† l\'avance. Pr√©cisez la date de r√©ouverture.',
       fields:[
         {id:'entreprise',label:'Entreprise',type:'text',prefill:'nom'},
         {id:'date_fermeture',label:'Date de fermeture',type:'text',placeholder:'Ex: samedi 15 mars'},
         {id:'motif',label:'Motif (court)',type:'text',placeholder:'Ex: travaux, jour f√©ri√©, √©v√©nement'},
         {id:'reouverture',label:'R√©ouverture le',type:'text',placeholder:'Ex: lundi 17 mars √† 9h00'},
         {id:'contact',label:'Contact pour urgences',type:'text',prefill:'telephone'},
       ],
       generate: f=>`[${f.entreprise||'Entreprise'}] Fermeture exceptionnelle le ${f.date_fermeture||'[date]'}${f.motif?' ('+f.motif+')':''}. R√©ouverture le ${f.reouverture||'[date]'}. Urgences: ${f.contact||'[T√©l]'}`
      },
      {id:'sms-livraison', name:'Notification livraison', icon:'üì¶', type:'sms',
       desc:'Pr√©venez votre client que sa commande est pr√™te ou en route',
       tips:'Court et factuel. Incluez le num√©ro de commande ou de tracking si disponible.',
       fields:[
         {id:'entreprise',label:'Entreprise',type:'text',prefill:'nom'},
         {id:'client_prenom',label:'Pr√©nom client',type:'text',placeholder:'Ex: Alex'},
         {id:'statut',label:'Statut',type:'select',options:['Commande pr√™te √† retirer','Commande exp√©di√©e','Commande livr√©e','Commande disponible']},
         {id:'ref',label:'N¬∞ commande (optionnel)',type:'text',placeholder:'Ex: #2589'},
         {id:'info',label:'Information compl√©mentaire',type:'text',placeholder:'Ex: Retrait jusqu\'√† 18h'},
       ],
       generate: f=>`[${f.entreprise||'Entreprise'}] ${f.client_prenom||'Bonjour'}, ${f.statut||'votre commande est pr√™te'}${f.ref?' ('+f.ref+')':''}. ${f.info||''}`
      },
      {id:'sms-relance', name:'SMS relance client inactif', icon:'üí¨', type:'sms',
       desc:'R√©activez un client perdu de vue',
       tips:'Maximum 1 relance SMS par trimestre. Personnalisez avec le pr√©nom.',
       fields:[
         {id:'entreprise',label:'Entreprise',type:'text',prefill:'nom'},
         {id:'client_prenom',label:'Pr√©nom client',type:'text',placeholder:'Ex: Julie'},
         {id:'offre',label:'Offre de retour (optionnel)',type:'text',placeholder:'Ex: -10% avec le code RETOUR'},
         {id:'tel',label:'Votre num√©ro',type:'text',prefill:'telephone'},
       ],
       generate: f=>`[${f.entreprise||'Entreprise'}] ${f.client_prenom||'Bonjour'}, vous nous manquez!${f.offre?' '+f.offre:''} On vous attend: ${f.tel||'[T√©l]'}. Stop: STOP`
      },
    ]
  },
  {
    id:'qualite', name:'Qualit√© & Op√©rationnel', icon:'‚öôÔ∏è',
    color:'#14b8a6', bg:'#f0fdfa',
    desc:'Proc√©dures, rapports d\'incident, checklists',
    tags:['Proc√©dure','Incident','Checklist','Non-conformit√©'],
    docs:[
      {id:'rapport-incident', name:'Rapport d\'incident', icon:'üö®', type:'doc',
       desc:'Documentez un incident ou accident dans votre √©tablissement',
       tips:'Remplissez dans les 24h suivant l\'incident. Soyez factuel, pas interpr√©tatif.',
       fields:[
         {id:'entreprise',label:'Entreprise',type:'text',prefill:'nom'},
         {id:'date_incident',label:'Date & heure de l\'incident',type:'text',placeholder:'Ex: 12/03/2025 √† 14h30'},
         {id:'lieu',label:'Lieu',type:'text',placeholder:'Ex: Cuisine, Caisse, Parking...'},
         {id:'type_incident',label:'Type d\'incident',type:'select',options:['Accident du travail','Incident client','Probl√®me mat√©riel / √©quipement','Probl√®me de s√©curit√©','Probl√®me qualit√©','Autre']},
         {id:'personnes',label:'Personnes impliqu√©es',type:'text',placeholder:'Ex: Employ√© A, Client B'},
         {id:'description',label:'Description des faits',type:'textarea',placeholder:'D√©crivez objectivement ce qui s\'est pass√©...'},
         {id:'consequences',label:'Cons√©quences / Dommages',type:'textarea',placeholder:'Blessure l√©g√®re, d√©g√¢ts mat√©riels...'},
         {id:'actions_imm',label:'Actions imm√©diates prises',type:'textarea',placeholder:'Soins administr√©s, zone s√©curis√©e...'},
         {id:'actions_prev',label:'Actions pr√©ventives propos√©es',type:'text',placeholder:'Pour √©viter que cela se reproduise'},
         {id:'redacteur',label:'R√©dacteur du rapport',type:'text',placeholder:'Votre nom + poste'},
       ],
       generate: f=>`RAPPORT D'INCIDENT
${f.entreprise||'[Entreprise]'}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üìÖ Date/Heure : ${f.date_incident||'[Date]'}
üìç Lieu       : ${f.lieu||'[Lieu]'}
üè∑Ô∏è Type       : ${f.type_incident||'[Type]'}
üë• Impliqu√©s  : ${f.personnes||'[Personnes]'}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
DESCRIPTION DES FAITS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${f.description||'[Description]'}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
CONS√âQUENCES / DOMMAGES
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${f.consequences||'[Cons√©quences]'}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
ACTIONS IMM√âDIATES
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${f.actions_imm||'[Actions imm√©diates]'}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
ACTIONS PR√âVENTIVES
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${f.actions_prev||'[Actions pr√©ventives]'}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Rapport r√©dig√© par : ${f.redacteur||'[R√©dacteur]'}
Date de r√©daction  : ${new Date().toLocaleDateString('fr-FR')}`
      },
      {id:'non-conformite', name:'Fiche de non-conformit√©', icon:'‚ùå', type:'doc',
       desc:'Signalez et suivez une non-conformit√© produit ou process',
       tips:'Num√©rotez vos fiches pour le suivi. D√©finissez un responsable et une date limite.',
       fields:[
         {id:'entreprise',label:'Entreprise',type:'text',prefill:'nom'},
         {id:'num_nc',label:'N¬∞ fiche NC',type:'text',placeholder:'Ex: NC-2025-001'},
         {id:'date',label:'Date',type:'date',today:true},
         {id:'type_nc',label:'Type de non-conformit√©',type:'select',options:['Produit d√©fectueux','Processus non respect√©','Document manquant','Livraison non conforme','R√®gle hygi√®ne/s√©curit√©','Autre']},
         {id:'description',label:'Description',type:'textarea',placeholder:'D√©crivez pr√©cis√©ment la non-conformit√©...'},
         {id:'cause',label:'Cause probable',type:'text',placeholder:'Ex: D√©faillance fournisseur, erreur process'},
         {id:'action_corrective',label:'Action corrective',type:'textarea',placeholder:'Que faut-il faire pour corriger...'},
         {id:'responsable',label:'Responsable traitement',type:'text',placeholder:'Nom + poste'},
         {id:'delai',label:'D√©lai de traitement',type:'text',placeholder:'Ex: avant le 20/03/2025'},
       ],
       generate: f=>`FICHE DE NON-CONFORMIT√â ‚Äî ${f.num_nc||'NC-[N¬∞]'}
${f.entreprise||'[Entreprise]'}
Date : ${f.date||new Date().toLocaleDateString('fr-FR')}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

TYPE           : ${f.type_nc||'[Type]'}
CAUSE PROBABLE : ${f.cause||'[Cause]'}
RESPONSABLE    : ${f.responsable||'[Responsable]'}
D√âLAI          : ${f.delai||'[D√©lai]'}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
DESCRIPTION DE LA NON-CONFORMIT√â
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${f.description||'[Description]'}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
ACTION CORRECTIVE
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${f.action_corrective||'[Action corrective]'}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Statut : ‚òê En cours  ‚òê Trait√©  ‚òê Cl√¥tur√©

Signature responsable : _________________`
      },
      {id:'procedure-interne', name:'Proc√©dure interne (template)', icon:'üìñ', type:'doc',
       desc:'Documentez une proc√©dure ou un process de votre entreprise',
       tips:'Num√©rotez chaque √©tape. Incluez qui fait quoi et quand. Revoyez annuellement.',
       fields:[
         {id:'entreprise',label:'Entreprise',type:'text',prefill:'nom'},
         {id:'titre_proc',label:'Titre de la proc√©dure',type:'text',placeholder:'Ex: Proc√©dure d\'ouverture du magasin'},
         {id:'version',label:'Version',type:'text',placeholder:'Ex: V1.0'},
         {id:'responsable',label:'Responsable',type:'text',placeholder:'Ex: Responsable de magasin'},
         {id:'frequence',label:'Fr√©quence',type:'text',placeholder:'Ex: Quotidienne, Hebdomadaire'},
         {id:'etapes',label:'√âtapes de la proc√©dure',type:'textarea',placeholder:'1. Arriver 15 min avant ouverture\n2. D√©sactiver l\'alarme\n3. ...'},
         {id:'materiels',label:'Mat√©riels / acc√®s n√©cessaires',type:'text',placeholder:'Ex: Cl√©s, code alarme, tablette'},
         {id:'si_pb',label:'En cas de probl√®me',type:'text',placeholder:'Ex: Appeler le responsable au 06...'},
       ],
       generate: f=>`PROC√âDURE INTERNE
${f.entreprise||'[Entreprise]'}

TITRE      : ${f.titre_proc||'[Titre]'}
VERSION    : ${f.version||'V1.0'}
RESPONSABLE: ${f.responsable||'[Responsable]'}
FR√âQUENCE  : ${f.frequence||'[Fr√©quence]'}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

MAT√âRIELS N√âCESSAIRES :
${f.materiels||'[Mat√©riels]'}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
√âTAPES :
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${f.etapes||'[√âtapes]'}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
EN CAS DE PROBL√àME :
${f.si_pb||'[Contacter : ...]'}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Approuv√© par : ________________
Date : ${new Date().toLocaleDateString('fr-FR')}     Version : ${f.version||'V1.0'}`
      },
      {id:'checklist', name:'Check-list ouverture/fermeture', icon:'‚úÖ', type:'doc',
       desc:'Liste de contr√¥le pour ouverture ou fermeture d\'√©tablissement',
       tips:'Plastifiez ce document et gardez-le sur place. Cochez en temps r√©el.',
       fields:[
         {id:'entreprise',label:'Entreprise',type:'text',prefill:'nom'},
         {id:'type_checklist',label:'Type',type:'select',options:['Ouverture','Fermeture','Les deux']},
         {id:'ouverture_items',label:'Points d\'ouverture',type:'textarea',placeholder:'D√©sactiver alarme\nAllumer √©clairage\nV√©rifier caisse\n...'},
         {id:'fermeture_items',label:'Points de fermeture',type:'textarea',placeholder:'Encaisser la caisse\n√âteindre √©quipements\nActiver alarme\n...'},
       ],
       generate: f=>`CHECK-LIST ‚Äî ${f.type_checklist||'Ouverture/Fermeture'}
${f.entreprise||'[Entreprise]'}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Date : ___________ Heure : _________
Agent : _____________________________
${(f.type_checklist==='Ouverture'||f.type_checklist==='Les deux')?`
OUVERTURE
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${(f.ouverture_items||'').split('\n').map(i=>i.trim()?'‚òê '+i:'').filter(Boolean).join('\n')}
`:''}${(f.type_checklist==='Fermeture'||f.type_checklist==='Les deux')?`
FERMETURE
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${(f.fermeture_items||'').split('\n').map(i=>i.trim()?'‚òê '+i:'').filter(Boolean).join('\n')}
`:''}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Signature : _____________________`
      },
    ]
  },
  {
    id:'achats', name:'Achats & Fournisseurs', icon:'üõí',
    color:'#f97316', bg:'#fff7ed',
    desc:'Demandes de devis, bons de commande, √©valuation fournisseur',
    tags:['Devis','Bon de commande','√âvaluation'],
    docs:[
      {id:'demande-devis', name:'Demande de devis', icon:'üí¨', type:'doc',
       desc:'Sollicitez un devis aupr√®s d\'un fournisseur ou prestataire',
       tips:'Soyez pr√©cis sur vos besoins. Fixez une date limite de r√©ponse.',
       fields:[
         {id:'entreprise',label:'Votre entreprise',type:'text',prefill:'nom'},
         {id:'fournisseur',label:'Fournisseur / Prestataire',type:'text',placeholder:'Ex: SARL Martin Fournitures'},
         {id:'objet',label:'Objet de la demande',type:'text',placeholder:'Ex: Fournitures de bureau Q2 2025'},
         {id:'description',label:'Description des besoins',type:'textarea',placeholder:'D√©taillez les produits/services souhait√©s, quantit√©s, sp√©cifications...'},
         {id:'date_livraison',label:'Date de livraison souhait√©e',type:'date'},
         {id:'date_reponse',label:'Date limite de r√©ponse souhait√©e',type:'date'},
         {id:'contact',label:'Votre contact',type:'text',placeholder:'Nom + email + t√©l'},
       ],
       generate: f=>`${f.entreprise||'[Entreprise]'}

${new Date().toLocaleDateString('fr-FR')}

√Ä l'attention de : ${f.fournisseur||'[Fournisseur]'}

Objet : Demande de devis ‚Äî ${f.objet||'[Objet]'}

Madame, Monsieur,

Dans le cadre de notre activit√©, nous souhaitons vous solliciter pour l'√©tablissement d'un devis concernant :

${f.description||'[Description des besoins]'}

Nos contraintes :
‚Ä¢ Livraison souhait√©e : ${f.date_livraison||'√Ä d√©finir'}
‚Ä¢ R√©ponse souhait√©e avant le : ${f.date_reponse||'√Ä pr√©ciser'}

Nous restons disponibles pour tout √©change compl√©mentaire. Vous pouvez nous contacter √† : ${f.contact||'[Contact]'}.

Nous vous remercions par avance et vous adressons nos cordiales salutations.

${f.entreprise||'[Entreprise]'}`
      },
      {id:'bon-commande', name:'Bon de commande', icon:'üõçÔ∏è', type:'doc',
       desc:'Formalisez une commande aupr√®s d\'un fournisseur',
       tips:'Gardez toujours une copie. Num√©rotez vos bons de commande.',
       fields:[
         {id:'entreprise',label:'Votre entreprise',type:'text',prefill:'nom'},
         {id:'adresse',label:'Votre adresse',type:'text',prefill:'adresse'},
         {id:'fournisseur',label:'Fournisseur',type:'text',placeholder:'Ex: XYZ Distribution'},
         {id:'num_bc',label:'N¬∞ du bon de commande',type:'text',placeholder:'Ex: BC-2025-042'},
         {id:'date',label:'Date',type:'date',today:true},
         {id:'articles',label:'Articles command√©s',type:'textarea',placeholder:'D√©signation | Qt√© | Prix unit. HT | Total HT\n---\nEx: Papier A4 500f | 10 | 4,50‚Ç¨ | 45,00‚Ç¨'},
         {id:'total_ht',label:'Total HT (‚Ç¨)',type:'text',placeholder:'Ex: 450,00'},
         {id:'total_ttc',label:'Total TTC (‚Ç¨)',type:'text',placeholder:'Ex: 540,00'},
         {id:'livraison',label:'Adresse de livraison',type:'text',prefill:'adresse'},
         {id:'date_livraison',label:'Date de livraison souhait√©e',type:'date'},
       ],
       generate: f=>`BON DE COMMANDE
${f.entreprise||'[Entreprise]'}
${f.adresse||''}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
N¬∞ BC : ${f.num_bc||'BC-[N¬∞]'}
Date  : ${f.date||new Date().toLocaleDateString('fr-FR')}

FOURNISSEUR : ${f.fournisseur||'[Fournisseur]'}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
ARTICLES COMMAND√âS :

D√©signation | Qt√© | Prix unit. HT | Total HT
${f.articles||'[Articles]'}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
TOTAL HT  : ${f.total_ht||'[HT]'} ‚Ç¨
TVA       : Selon taux applicable
TOTAL TTC : ${f.total_ttc||'[TTC]'} ‚Ç¨
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Livraison √† : ${f.livraison||'[Adresse livraison]'}
Date souhait√©e : ${f.date_livraison||'[Date]'}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Signature & Tampon :

${f.entreprise||'[Entreprise]'}`
      },
      {id:'eval-fournisseur', name:'√âvaluation fournisseur', icon:'‚≠ê', type:'doc',
       desc:'√âvaluez la performance d\'un fournisseur ou prestataire',
       tips:'Faites cette √©valuation apr√®s chaque prestation significative. Partagez les r√©sultats avec le fournisseur.',
       fields:[
         {id:'entreprise',label:'Votre entreprise',type:'text',prefill:'nom'},
         {id:'fournisseur',label:'Fournisseur √©valu√©',type:'text',placeholder:'Ex: Transport Express SAS'},
         {id:'periode',label:'P√©riode √©valu√©e',type:'text',placeholder:'Ex: Q1 2025'},
         {id:'note_qualite',label:'Note qualit√© (1-5)',type:'select',options:['1 - Insuffisant','2 - √Ä am√©liorer','3 - Acceptable','4 - Bien','5 - Excellent']},
         {id:'note_delais',label:'Note d√©lais (1-5)',type:'select',options:['1 - Insuffisant','2 - √Ä am√©liorer','3 - Acceptable','4 - Bien','5 - Excellent']},
         {id:'note_prix',label:'Note rapport qualit√©/prix (1-5)',type:'select',options:['1 - Insuffisant','2 - √Ä am√©liorer','3 - Acceptable','4 - Bien','5 - Excellent']},
         {id:'note_comm',label:'Note communication (1-5)',type:'select',options:['1 - Insuffisant','2 - √Ä am√©liorer','3 - Acceptable','4 - Bien','5 - Excellent']},
         {id:'points_forts',label:'Points forts',type:'textarea',placeholder:'Ce qui fonctionne bien...'},
         {id:'axes_amelio',label:'Axes d\'am√©lioration',type:'textarea',placeholder:'Ce qui pourrait √™tre am√©lior√©...'},
         {id:'decision',label:'D√©cision',type:'select',options:['Reconduire le partenariat','Reconduire sous r√©serve d\'am√©lioration','Mettre en concurrence','Ne pas reconduire']},
         {id:'evaluateur',label:'√âvaluateur',type:'text',placeholder:'Votre nom + poste'},
       ],
       generate: f=>`√âVALUATION FOURNISSEUR
${f.entreprise||'[Entreprise]'}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Fournisseur : ${f.fournisseur||'[Fournisseur]'}
P√©riode     : ${f.periode||'[P√©riode]'}
Date eval.  : ${new Date().toLocaleDateString('fr-FR')}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
NOTES
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Qualit√© produits/services : ${f.note_qualite||'[Note]'}
Respect des d√©lais         : ${f.note_delais||'[Note]'}
Rapport qualit√©/prix      : ${f.note_prix||'[Note]'}
Communication              : ${f.note_comm||'[Note]'}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
POINTS FORTS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${f.points_forts||'[Points forts]'}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
AXES D'AM√âLIORATION
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${f.axes_amelio||'[Axes d\'am√©lioration]'}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
D√âCISION : ${f.decision||'[D√©cision]'}

√âvalu√© par : ${f.evaluateur||'[√âvaluateur]'}`
      },
    ]
  },
];

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// STATE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let _currentTheme = null;
let _currentDoc = null;
let _favorites = new Set();
let _generated = 0;
let _currentTab = 'form';

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// INIT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
window.initModeles = function(){
  renderThemes();
  loadFavoritesFromStorage();
};

function renderThemes(filter=''){
  const grid = document.getElementById('themesGrid');
  const themes = filter ? THEMES.map(t=>({...t, docs:t.docs.filter(d=>
    d.name.toLowerCase().includes(filter)||d.desc.toLowerCase().includes(filter)||
    t.name.toLowerCase().includes(filter)
  )})).filter(t=>t.docs.length>0) : THEMES;

  grid.innerHTML = themes.map(t=>`
    <div class="theme-card ${_currentTheme===t.id?'active':''}" 
         style="--theme-color:${t.color};--theme-bg:${t.bg}"
         onclick="selectTheme('${t.id}')">
      <div class="theme-header">
        <div class="theme-icon">${t.icon}</div>
        <div style="flex:1;min-width:0">
          <div class="theme-name">${t.name}</div>
          <div class="theme-desc">${t.desc}</div>
        </div>
        <span class="theme-count" style="background:${t.bg};color:${t.color}">${t.docs.length} mod√®les</span>
      </div>
      <div class="theme-tags">${t.tags.map(tag=>`<span class="theme-tag">${tag}</span>`).join('')}</div>
    </div>`).join('');
}

function selectTheme(id){
  const prev = _currentTheme;
  _currentTheme = id === _currentTheme ? null : id;
  renderThemes();
  if(!_currentTheme){closePanel();return;}
  const theme = THEMES.find(t=>t.id===id);
  if(!theme) return;
  renderDocsPanel(theme);
  const panel = document.getElementById('docsPanel');
  panel.classList.add('show');
  panel.style.setProperty('--panel-color', theme.bg);
  setTimeout(()=>panel.scrollIntoView({behavior:'smooth',block:'nearest'}),100);
}

function renderDocsPanel(theme){
  document.getElementById('docsPanelTitle').innerHTML = `${theme.icon} ${theme.name}`;
  const grid = document.getElementById('docsGrid');
  grid.innerHTML = theme.docs.map(d=>{
    const isFav = _favorites.has(d.id);
    const badgeClass = d.type==='email'?'badge-email':d.type==='sms'?'badge-sms':'badge-doc';
    const badgeLabel = d.type==='email'?'Email':d.type==='sms'?'SMS':'Document';
    return `
    <div class="doc-card" onclick="openDocModal('${d.id}')">
      <span class="doc-type-badge ${badgeClass}">${badgeLabel}</span>
      ${isFav?'<span style="position:absolute;top:10px;right:60px;font-size:12px">‚≠ê</span>':''}
      <div class="doc-icon">${d.icon}</div>
      <div class="doc-name">${d.name}</div>
      <div class="doc-desc">${d.desc}</div>
    </div>`;
  }).join('');
}

function closePanel(){
  _currentTheme=null;
  document.getElementById('docsPanel').classList.remove('show');
  renderThemes();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MODAL
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openDocModal(docId){
  const doc = THEMES.flatMap(t=>t.docs).find(d=>d.id===docId);
  if(!doc) return;
  _currentDoc = doc;
  document.getElementById('modal-icon').textContent = doc.icon;
  document.getElementById('modal-title').textContent = doc.name;
  document.getElementById('fav-btn').textContent = _favorites.has(doc.id)?'‚≠ê Favori':'‚òÜ Favori';
  renderForm(doc);
  switchTab('form', document.querySelector('.modal-tab'));
  document.getElementById('genModal').classList.add('show');
  updatePreview();
}

function renderForm(doc){
  const form = document.getElementById('modalForm');
  form.innerHTML = doc.fields.map(field=>{
    let prefillVal = '';
    if(field.prefill==='nom') prefillVal=pv('nom','');
    else if(field.prefill==='adresse') prefillVal=pv('adresse','')||pv('adresse1','');
    else if(field.prefill==='email') prefillVal=window._userEmail||'';
    else if(field.prefill==='telephone') prefillVal=pv('telephone','')||pv('tel','');
    let todayVal = '';
    if(field.today) todayVal=new Date().toISOString().split('T')[0];
    const val = field.today?todayVal:(prefillVal||'');

    if(field.type==='textarea') return `
      <div class="field-group">
        <label class="field-label">${field.label}</label>
        <textarea class="field-input" id="f-${field.id}" placeholder="${field.placeholder||''}" rows="3" oninput="updatePreview()">${val}</textarea>
      </div>`;
    if(field.type==='select') return `
      <div class="field-group">
        <label class="field-label">${field.label}</label>
        <select class="field-select" id="f-${field.id}" onchange="updatePreview()">
          ${(field.options||[]).map(o=>`<option value="${o}">${o}</option>`).join('')}
        </select>
      </div>`;
    return `
      <div class="field-group">
        <label class="field-label">${field.label}</label>
        <input class="field-input" id="f-${field.id}" type="${field.type==='date'?'date':'text'}" 
          placeholder="${field.placeholder||''}" value="${val}" oninput="updatePreview()" onchange="updatePreview()"/>
      </div>`;
  }).join('');
}

function getFormValues(){
  if(!_currentDoc) return {};
  const vals = {};
  _currentDoc.fields.forEach(f=>{
    const el=document.getElementById('f-'+f.id);
    if(el) vals[f.id]=el.value;
  });
  return vals;
}

function updatePreview(){
  if(!_currentDoc) return;
  const f = getFormValues();
  const content = _currentDoc.generate(f);
  const preview = document.getElementById('modalPreview');
  const type = _currentDoc.type;

  if(type==='sms'){
    const charCount = content.length;
    const smsCount = Math.ceil(charCount/160);
    preview.innerHTML = `
      <div style="max-width:400px;margin:0 auto">
        <div class="preview-sms">${escapeHtml(content)}</div>
        <div class="sms-char-count">${charCount} caract√®res ¬∑ ${smsCount} SMS</div>
        <div style="margin-top:12px;font-size:11px;color:var(--muted);background:var(--orange-light,#fef3c7);padding:8px 12px;border-radius:8px">
          üí° Ajoutez toujours "Stop: STOP" pour les SMS marketing (obligation l√©gale)
        </div>
      </div>`;
  } else if(type==='email'){
    const subject = _currentDoc.objet?_currentDoc.objet(f):'[Objet]';
    preview.innerHTML = `
      <div class="preview-email">
        <div class="email-meta">
          <div class="email-meta-row"><span class="email-meta-lbl">De :</span><span class="email-meta-val">${pv('nom',window._userName||'[Exp√©diteur]')} &lt;${window._userEmail||'[email]'}&gt;</span></div>
          <div class="email-meta-row"><span class="email-meta-lbl">√Ä :</span><span class="email-meta-val">[Destinataire]</span></div>
          <div class="email-meta-row"><span class="email-meta-lbl">Objet :</span><span class="email-meta-val" style="font-weight:700">${escapeHtml(subject)}</span></div>
        </div>
        <div class="email-body">${escapeHtml(content)}</div>
      </div>`;
  } else {
    preview.innerHTML = `<div class="preview-doc">${escapeHtml(content)}</div>`;
  }
}

function switchTab(tab, el){
  _currentTab=tab;
  document.querySelectorAll('.modal-tab').forEach(t=>t.classList.remove('active'));
  if(el) el.classList.add('active');
  const form = document.getElementById('modalForm');
  const preview = document.getElementById('modalPreview');
  if(tab==='form'){
    form.style.display=''; preview.style.display='';
    document.getElementById('modal-title').textContent=_currentDoc?.name||'Document';
  } else if(tab==='preview'){
    updatePreview();
    form.style.display='none'; preview.style.display='';
    document.getElementById('modal-title').textContent='Aper√ßu';
  } else if(tab==='tips'){
    form.style.display='none';
    preview.innerHTML=`<div style="padding:20px">
      <div style="font-size:20px;margin-bottom:12px">üí°</div>
      <div style="font-size:13px;font-weight:700;margin-bottom:8px">Conseils pour ce mod√®le</div>
      <div style="font-size:13px;color:var(--muted);line-height:1.8">${_currentDoc?.tips||'Aucun conseil disponible.'}</div>
      <div style="margin-top:20px;padding:14px;background:var(--blue-ghost);border-radius:10px;font-size:12px;color:var(--blue-main)">
        üìã Type : <strong>${_currentDoc?.type==='email'?'Email':_currentDoc?.type==='sms'?'SMS':'Document Word/PDF'}</strong>
      </div>
    </div>`;
  }
}

function closeModal(){document.getElementById('genModal').classList.remove('show');}

function copyDoc(){
  if(!_currentDoc) return;
  const f = getFormValues();
  const content = _currentDoc.generate(f);
  navigator.clipboard.writeText(content).then(()=>showToast('üìã Copi√© dans le presse-papiers !','success'));
  trackGenerated();
}

function printDoc(){
  if(!_currentDoc) return;
  const f = getFormValues();
  const content = _currentDoc.generate(f);
  const type = _currentDoc.type;
  const w = window.open('','_blank','width=800,height=600');
  w.document.write(`<!DOCTYPE html><html><head><title>${_currentDoc.name}</title>
  <style>body{font-family:'Segoe UI',sans-serif;max-width:700px;margin:40px auto;font-size:14px;line-height:1.7;color:#1a1f36;white-space:pre-wrap}
  @media print{@page{margin:20mm}body{margin:0}}
  .header{text-align:right;color:#6b7280;font-size:12px;margin-bottom:20px;border-bottom:1px solid #e2e8f0;padding-bottom:10px}
  </style></head><body>
  <div class="header">${_currentDoc.name} ¬∑ G√©n√©r√© avec ALTEORE ¬∑ ${new Date().toLocaleDateString('fr-FR')}</div>
  ${type==='sms'?`<div style="background:#1a1f36;color:white;padding:24px;border-radius:12px;max-width:400px">${escapeHtml(content)}</div>`:`${escapeHtml(content)}`}
  <script>window.onload=function(){window.print();}<\/script></body></html>`);
  w.document.close();
  trackGenerated();
}

function trackGenerated(){
  _generated++;
  document.getElementById('stat-gen').textContent=_generated;
  showToast('‚úÖ Document g√©n√©r√© !','success');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// FAVORIS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function loadFavoritesFromStorage(){
  try{const s=localStorage.getItem('alteore_modeles_fav');if(s){_favorites=new Set(JSON.parse(s));}}catch(e){}
  updateFavCount();
}
function saveFavorites(){
  try{localStorage.setItem('alteore_modeles_fav',JSON.stringify([..._favorites]));}catch(e){}
  updateFavCount();
}
function toggleFav(){
  if(!_currentDoc) return;
  if(_favorites.has(_currentDoc.id)) _favorites.delete(_currentDoc.id);
  else _favorites.add(_currentDoc.id);
  document.getElementById('fav-btn').textContent=_favorites.has(_currentDoc.id)?'‚≠ê Favori':'‚òÜ Favori';
  saveFavorites();
  if(_currentTheme){ const t=THEMES.find(th=>th.id===_currentTheme); if(t)renderDocsPanel(t); }
  showToast(_favorites.has(_currentDoc.id)?'‚≠ê Ajout√© aux favoris':'Retir√© des favoris');
}
function updateFavCount(){
  const n=_favorites.size;
  document.getElementById('fav-count').textContent=n;
  document.getElementById('stat-fav').textContent=n;
}

function openFavorites(){
  const favDocs = THEMES.flatMap(t=>t.docs).filter(d=>_favorites.has(d.id));
  if(favDocs.length===0){showToast('Aucun favori pour l\'instant','warn');return;}
  // Cr√©er un faux th√®me favoris
  const faketheme={id:'_fav',name:'Mes favoris',icon:'‚≠ê',color:'#f59e0b',bg:'#fffbeb',desc:'',tags:[],docs:favDocs};
  _currentTheme='_fav';
  renderDocsPanel(faketheme);
  document.getElementById('docsPanel').classList.add('show');
  document.getElementById('docsPanel').style.setProperty('--panel-color','#fffbeb');
  document.getElementById('docsPanelTitle').innerHTML='‚≠ê Mes favoris';
  document.getElementById('docsPanel').scrollIntoView({behavior:'smooth',block:'nearest'});
}

function openRecents(){showToast('Bient√¥t disponible üöÄ');}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SEARCH
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function searchModels(q){
  const v=q.toLowerCase().trim();
  document.getElementById('search-clear').style.display=v?'':'none';
  if(!v){renderThemes();closePanel();return;}
  renderThemes(v);
  // Ouvrir auto si r√©sultats
  const matched = THEMES.filter(t=>t.docs.some(d=>
    d.name.toLowerCase().includes(v)||d.desc.toLowerCase().includes(v)||t.name.toLowerCase().includes(v)
  ));
  if(matched.length===1){
    const theme = {...matched[0], docs:matched[0].docs.filter(d=>
      d.name.toLowerCase().includes(v)||d.desc.toLowerCase().includes(v)||matched[0].name.toLowerCase().includes(v)
    )};
    renderDocsPanel(theme);
    document.getElementById('docsPanel').classList.add('show');
  } else {
    closePanel(); _currentTheme=null;
  }
}
function clearSearch(){
  document.getElementById('searchInput').value='';
  searchModels('');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// UTILS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function escapeHtml(t){return (t||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}
function showToast(msg,type=''){const t=document.getElementById('toast');t.textContent=msg;t.className='toast show '+(type||'');setTimeout(()=>t.className='toast',3000);}

// Expose
window.selectTheme=selectTheme;window.closePanel=closePanel;
window.openDocModal=openDocModal;window.closeModal=closeModal;
window.switchTab=switchTab;window.updatePreview=updatePreview;
window.copyDoc=copyDoc;window.printDoc=printDoc;
window.toggleFav=toggleFav;window.openFavorites=openFavorites;window.openRecents=openRecents;
window.searchModels=searchModels;window.clearSearch=clearSearch;
</script>
<script src="nav.js"></script>
</body>
</html>
